/*
 * @author <a href="mailto:staurenliu@tencent.com">stauren</a>
 * @revision 10408
 * @version 1.39a
 */
if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());if(typeof __!="undefined"&&!__.Json){(function(){var b=__;b.add("Json",{toJson:function(a){return JSON.stringify(a)},fromJson:function(a){return JSON.parse(a)}})}())}(function(a){var e="Stockdiy",c="1.39",d=a.__,b;for(b in __.config.loadingMods){if(b.indexOf("stock-diy")===0){break}}d.register(b,c,["fn-base"],function(){var q=d.Event,m=d.Lang,r=d.Dom,o=d.Io,n=d.Json,w,k,D,s=d.config.win,I=d.config.doc,G=d.config.ua,i=d.Table,j=i.processors,l=d.log,y=new d.CronLoader(),H,p=false,M={changeName:"\u66f4\u6539\u540d\u79f0",deleteGroup:"\u5220\u9664\u7ec4\u5408",noteHint:"\u5982\u60a8\u7684\u8d2d\u5165\u7406\u7531\u548c\u76ee\u6807\u4ef7\u4f4d...",clickPre:"du-sd-clk-",moPre:"du-sd-mo-",keyUpPre:"du-sd-ku-",linePrefix:"du-sd-st~",lineBlPrefix:"du-sd-bl~",calIptPre:"du-sd-cali-",calTriPre:"du-sd-calt-",blErr:"du-sd-bl-error",alIptCtn:"du-sd-al-ctn"},x={groupTab:"grouptab",groupNew:"groupnew",marketTab:"markettab",listType:"listtype",hideNtTop:"hidenttop",hideNtHk:"hidenthk",updateTop:"updatetop",updateHk:"updatehk",groupDrop:"groupdrop",groupRename:"grouprename",groupRem:"groupremove",tsort:"sort",stockRemove:"stockremove",dialogOk:"dlgok",dialogNo:"dlgno",dialogCancel:"dlgcancel",addFav:"fav",addhome:"sethome",noteEdit:"noteedit",blEdit:"bledit",alEdit:"aledit",addBl:"addbl",delBl:"delbl",noteText:"notetext",alCancel:"alcancel",note:"note",grpBtn:"grpbtn",hint:"hint",hintTarget:"hinttar",rfCost:"rfcost",rfAmount:"rfamout",rfPrice:"rfprice",rfTax:"rftax",blAmout:"blamout",blPrice:"blprice",blTax:"bltax",drOver:"drover",item:"du-sd-item",dlgTitle:"du-sd-dlgtitle",hide:"undis",top:"top",ieHide:"iehideico",alarmIco:"ico9",alarmActive:"ico10",balanceIco:"ico7",balanceActive:"ico7_ed",noteIco:"ico9_bak",noteIcoActive:"ico9_baked"},P={hkRealCount:19,hkDelayNoticeSec:120,hkDelayMaxSec:1800,loadingCycle:4,lazyWait:1,maxNoteLength:120};d.set("__.app."+e);var f=function(T,R,Q,S,U,V){this.Speed=10;this.Timeout=U;this.stopscroll=false;this.isSmoothScroll=V;this.LineHeight=29;this.NextButton=this.$(Q);this.PreviousButton=this.$(R);this.ScrollContent=this.$(T);this.ScrollContent.innerHTML+=this.ScrollContent.innerHTML;if(this.PreviousButton){this.PreviousButton.onclick=this.GetFunction(this,"Previous");this.PreviousButton.onmouseover=this.GetFunction(this,"MouseOver");this.PreviousButton.onmouseout=this.GetFunction(this,"MouseOut")}if(this.NextButton){this.NextButton.onclick=this.GetFunction(this,"Next");this.NextButton.onmouseover=this.GetFunction(this,"MouseOver");this.NextButton.onmouseout=this.GetFunction(this,"MouseOut")}this.ScrollContent.onmouseover=this.GetFunction(this,"MouseOver");this.ScrollContent.onmouseout=this.GetFunction(this,"MouseOut");if(S){this.Start()}};f.prototype={Refresh:function(){var Q=this.ScrollContent.innerHTML.split(/<\/p>/i),R=Q.slice(0,Q.length/2).join("</p>")+"</p>";this.ScrollContent.innerHTML=R+R},$:function(Q){return document.getElementById(Q)},Previous:function(){this.stopscroll=true;this.Scroll("up")},Next:function(){this.stopscroll=true;this.Scroll("down")},Start:function(){if(this.isSmoothScroll){this.AutoScrollTimer=setInterval(this.GetFunction(this,"SmoothScroll"),this.Timeout)}else{this.AutoScrollTimer=setInterval(this.GetFunction(this,"AutoScroll"),this.Timeout)}},Stop:function(){clearTimeout(this.AutoScrollTimer);this.DelayTimerStop=0},MouseOver:function(){this.stopscroll=true},MouseOut:function(){this.stopscroll=false},AutoScroll:function(){if(this.stopscroll){return}this.ScrollContent.scrollTop++;if(parseInt(this.ScrollContent.scrollTop)%this.LineHeight!=0){this.ScrollTimer=setTimeout(this.GetFunction(this,"AutoScroll"),this.Speed)}else{if(parseInt(this.ScrollContent.scrollTop)>=parseInt(this.ScrollContent.scrollHeight)/2){this.ScrollContent.scrollTop=0}clearTimeout(this.ScrollTimer)}},SmoothScroll:function(){if(this.stopscroll){return}this.ScrollContent.scrollTop++;if(parseInt(this.ScrollContent.scrollTop)>=parseInt(this.ScrollContent.scrollHeight)/2){this.ScrollContent.scrollTop=0}},Scroll:function(Q){if(Q=="up"){this.ScrollContent.scrollTop--}else{this.ScrollContent.scrollTop++}if(parseInt(this.ScrollContent.scrollTop)>=parseInt(this.ScrollContent.scrollHeight)/2){this.ScrollContent.scrollTop=0}else{if(parseInt(this.ScrollContent.scrollTop)<=0){this.ScrollContent.scrollTop=parseInt(this.ScrollContent.scrollHeight)/2}}if(parseInt(this.ScrollContent.scrollTop)%this.LineHeight!=0){this.ScrollTimer=setTimeout(this.GetFunction(this,"Scroll",Q),this.Speed)}},GetFunction:function(Q,S,R){return function(){Q[S](R)}}};var B=d.Class.extend({ops:["change_order","sort","add_stock","del_stock","click_stock","browse_cn","browse_hk","browse_us","browse_jj","browse_profit","browse_trade","browse_alert","click_cnnews","click_cnnewsmore","click_cnnewscompany","click_cnnotice","click_cnnoticemore","click_cnnoticecompany","click_hknews","click_hknewsmore","click_hknewscompany","click_hknotice","click_hknoticemore","click_hknoticecompany","click_usnews","click_usnewsmore","click_usnewscompany","click_jjnews","click_jjnewsmore","click_jjnewscompany","click_jjnotice","click_jjnoticemore","click_jjnoticecompany","pricebox_input","pricebox_click_stock","pricebox_refresh","pricebox_add_stock","pricebox_fold","browse_notes","hk_refresh","hk_delay_to_realtime","add_group","update_group","del_group","browse_group","click_fold","browse_minipic","browse_klin","click_refresh","browse","none"],count:0,imgs:{},go:function(S,R){var V,Q,T,W,U;V=this.ops[S];if(V){V=this._get(V,S,R);T=++this.count;if(T>=100){this.count=1;T=1;W={};this.imgs=W}else{W=this.imgs}Q=new Image;W[T]=Q;U=function(){delete W[T];Q.onload=null;Q.onerror=null;Q=null};Q.onload=U;Q.onerror=U;s.setTimeout(function(){Q.src=V},500)}},init:function(S){var R="http://btrace.qq.com/collect?sIp=&iQQ="+S+"&sBiz=",T="&iSta=0&iTy=148&iFlow=",Q=D.timeBar;this._get=function(X,V,U){var W;if(V===50){W=[R,"&sOp=","&iSta=&iTy=243&iFlow=",(new Date).valueOf()%10000*10000+m.rand(9999),"&sUrl=",encodeURIComponent(location.href),"&sRefer=",encodeURIComponent(document.referrer)]}else{W=[R,"finance.stock.pstock&sOp=",X,T,(new Date).valueOf()%10000*10000+m.rand(9999),"&iFrom=web"]}return W.join("")}}});var C=function(W,T,Q,V){var S=W.parentNode,U=S.id,R=S.getElementsByTagName(Q);m.e(R,function(Y,X){if(Y===W){r.addClass(Y,T)}else{r.remClass(Y,T)}})},N=function(R,Q){if(r.hasClass(R,Q)){r.remClass(R,Q)}else{r.addClass(R,Q)}},v=function(R,Q){R=r.f(R);if(R){R.innerHTML=Q}},L=function(R){var Q=r.f(R);if(!Q){throw new Error("Element "+R+" is not found.")}else{r.addClass(Q,x.hide)}},J=function(R){var Q=r.f(R);if(!Q){throw new Error("Element "+R+" is not found.")}else{r.remClass(Q,x.hide)}},K=function(S){var R=S.indexOf("."),Q;if(R===-1){Q=S}else{if(R===0){Q=S.substr(1)}else{Q=S.substr(0,R)}}return Q},F=function(Q){s.setTimeout(function(){throw new Error(Q)},1)},A=function(S,Q,T){var R=navigator.userAgent;if(R.match(/Gecko/)){s.sidebar.addPanel(T,Q,"")}else{if(R.match(/MSIE/)){s.external.AddFavorite(Q,T)}else{if(R.match(/Opera/)){S.setAttribute("href",Q);S.setAttribute("title",T);S.setAttribute("rel","sidebar");S.click()}else{s.alert("Please press Ctrl+D to add bookmark.")}}}},O=function(R){if(I.all){I.body.style.behavior="url(#default#homepage)";I.body.setHomePage(R)}else{if(s.sidebar){if(s.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var Q=Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);Q.setCharPref("browser.startup.homepage",R)}catch(S){s.alert("this action was aviod by your browser, if you want to enable, please enter about:config in your address line, and change the value of signed.applets.codebase_principal_support to true")}}}}},g=function(Q){if(!Q||Q.nodeType!==1){return false}else{if(Q.currentStyle&&typeof Q.currentStyle.wordBreak==="string"){g=function(R){R.runtimeStyle.wordBreak="break-all";return true};return g(Q)}else{if(I.createTreeWalker){g=function(R){var S=I.createTreeWalker(R,NodeFilter.SHOW_TEXT,null,false);var U,T,V=String.fromCharCode("8203");while(S.nextNode()){U=S.currentNode;T=m.trim(U.nodeValue).split("").join(V);U.nodeValue=T}return true};return g(Q)}else{return false}}}},h=function(S,Q,T,R){if(S=="--"){return S}if(Q===w){Q=S}if(S>1000000||S<-1000000){T=Math.floor(Math.log(Math.abs(S))/Math.log(10));if(S>100000000||S<-100000000){T=12-T;T=T>0?T:0;S=(S/100000000).toFixed(T)+"\u4ebf"}else{T=8-T;T=T>0?T:0;S=(S/10000).toFixed(T)+"\u4e07"}}else{S=S.toFixed(T)}return R?j.GET_SIGNED_COLOR(S,Q):(Q===0?S:j.GET_COLOR(S,Q))},E=function(W,V,S){var U,T=W.length,R,Q=0;if(T>V/2){S=S===w?"...":S;for(U=0,R=S.length;U<R;U++){Q+=S.charCodeAt(U)>255?2:1}for(U=0;U<T;U++){Q+=W.charCodeAt(U)>255?2:1;if(Q>V){break}}U=U<1?0:U-1;W=W.substring(0,U)+S}return W},z=function(R){var Q=D.list,S;if(R!==Q.activeEntry){S=R.className.split(" ");Q.activeEntry&&u();if(!S[1]){R.className+=" i-act"}else{if(S[1]=="i-sel"){R.className+="-act"}}Q.activeEntry=R}},u=function(){var Q=D.list,S,R;R=Q.activeEntry;if(R){S=R.className.split(" ");if(S[1]=="i-act"){R.className=S[0]}else{if(S[1]=="i-sel-act"){R.className=S[0]+" i-sel"}}Q.activeEntry=null}};d.app[e]=(function(){return{version:c,data:{},io:{loadingStatus:{addStock:false,remStock:false,mvStock:false,addGroup:false,remGroup:false,renameGroup:false,getList:false,getGroup:false,loadBl:false},urls:{apiBase:"http://stockapp.finance.qq.com/pstock/view/",getList:function(R,Q){R=R===w?D.marketTab.current:R;Q=Q===w?D.group.current:Q;return this.apiBase+"showstock.php?stktype="+R+"&grpid="+Q+"&uin="+k.QQ},getGroup:function(Q){Q=Q===w?D.marketTab.current:Q;return this.apiBase+"showgroup.php?stktype="+Q+"&uin="+k.QQ},remStock:function(Q,S,R){S=S===w?D.marketTab.current:S;R=R===w?D.group.current:R;return[this.apiBase,"manage.php?stktype=",S,"&grpid=",R,"&_r=",Math.random(),"&code=",Q,"&action=del&uin=",k.QQ].join("")},addStock:function(Q,S,R){S=S===w?D.marketTab.current:S;R=R===w?D.group.current:R;return[this.apiBase,"manage.php?stktype=",S,"&grpid=",R,"&code=",Q,"&_r=",Math.random(),"&action=add","&uin=",k.QQ].join("")},addGroup:function(Q){var R=D.marketTab.current;return[this.apiBase,"group.php?stktype=",R,"&grpname=",s.encodeURIComponent(Q),"&action=add","&_r=",Math.random(),"&uin=",k.QQ].join("")},remGroup:function(R){var Q=D.marketTab.current;return[this.apiBase,"group.php?stktype=",Q,"&grpid=",R,"&action=del","&_r=",Math.random(),"&uin=",k.QQ].join("")},renameGroup:function(S){var R=D.marketTab.current,Q=D.group.current;return[this.apiBase,"group.php?stktype=",R,"&grpid=",Q,"&grpname=",s.encodeURIComponent(S),"&action=upd","&_r=",Math.random(),"&uin=",k.QQ].join("")},saveOrder:function(R){var Q=D.group.current;return[this.apiBase,"setsequ.php?stktype=",R,"&grpid=",Q,"&_r=",Math.random(),"&uin=",k.QQ].join("")},editNote:function(Q,S){var R=D.group.current,T=D.marketTab.current;return[this.apiBase,"manage.php?action=upd&stktype=",T,"&grpid=",R,"&code=",Q,"&_r=",Math.random(),"&notes=",s.encodeURIComponent(S),"&uin=",k.QQ].join("")},loadBl:function(Q){var R=D.group.current,S=D.marketTab.current;return[this.apiBase,"trade.php?action=show&stktype=",S,"&grpid=",R,"&code=",Q,"&_r=",Math.random(),"&uin=",k.QQ].join("")},saveBl:function(Q){var R=D.group.current,S=D.marketTab.current;return[this.apiBase,"trade.php?action=upd&stktype=",S,"&grpid=",R,"&code=",Q,"&_r=",Math.random(),"&uin=",k.QQ].join("")},loadAl:function(Q,S){var R=D.group.current,S=S||D.marketTab.current;return[this.apiBase,"alert.php?action=show&stktype=",S,"&grpid=",R,"&code=",Q,"&_r=",Math.random(),"&uin=",k.QQ].join("")},saveAl:function(Q,S,T){var R=D.group.current;T=T||D.marketTab.current;return[this.apiBase,"alert.php?action=upd&stktype=",T,"&grpid=",R,"&code=",Q,"&alert=",s.encodeURIComponent(S.join("~")),"&_r=",Math.random(),"&uin=",k.QQ].join("")},saveFold:function(Q){return[this.apiBase,"setconf.php?type=fold&value=",parseInt(Q),"&_r=",Math.random(),"&uin=",k.QQ].join("")}},load:function(T,S,U,V){var R=this.loadingStatus,X,W,Q={};if(U&&U in R){if(U==="getList"){R[U]=V.market+"_"+V.group;X=function(){var Y=V.market+"_"+V.group,Z=R[U]===Y;if(Z){R[U]=false}else{l("request getList "+Y+" expired.")}return Z}}else{if(R[U]===false){R[U]=true;X=function(){R[U]=false;return true};W=function(){R[U]=false}}else{l("request type "+U+" cancelled.");return}}}if(V&&V.sPost){Q.sPost=V.sPost}D.notice.loading(true);o.p(T,function(Z){D.notice.loading(false);try{Z=n.fromJson(Z)}catch(Y){l(Y)}if(Z&&Z.code===0&&Z.data){if(!X||X()){S(Z)}}else{W&&W();D.notice.stdErr(Z.code,Z.msg)}},Q)}},notice:{pageWidth:960,stdErr:function(Q,R){switch(Q){case 1:this.lightErr("\u60a8\u8f93\u5165\u7684\u53c2\u6570\u6709\u8bef");break;case 2:D.login.showLogin();break;case 3:case 4:D.login.showLogin();break;case 5:this.fail("\u80a1\u7968\u4ee3\u7801\u9519\u8bef\uff0c\u64cd\u4f5c\u5931\u8d25");break;case 6:this.lightErr("\u60a8\u5b9a\u5236\u7684\u80a1\u7968\u6570\u76ee\u5df2\u7ecf\u8fbe\u5230\u6700\u5927\u503c");break;case 7:this.lightErr("\u8be5\u80a1\u7968\u5df2\u7ecf\u5b9a\u5236");break;case 8:this.lightErr("\u8be5\u80a1\u7968\u672a\u7ecf\u5b9a\u5236\uff0c\u8bf7\u5148\u5b9a\u5236");break;case 10:this.lightErr("\u7ec4\u5408\u521b\u5efa\u5931\u8d25\uff0c\u5df2\u8fbe\u5230\u7ec4\u5408\u6570\u76ee\u4e0a\u9650");break;case 11:this.lightErr("\u64cd\u4f5c\u5931\u8d25\uff0c\u7ec4\u5408\u4e0d\u5b58\u5728");break;case 12:this.lightErr("\u670d\u52a1\u5668\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5");break;case 9:default:this.lightErr("\u53d1\u751f\u670d\u52a1\u5668\u7aef\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5<br>\u9519\u8bef\u4ee3\u7801:"+Q);break}},middle1p5s:function(R){var Q,T,S,V=r.getWindowXY(),U=r.getScrollXY();T=(V[1]-50)/2+U[1]-100;S=(V[0]-278)/2+U[0];Q={css:"position:absolute;z-index:1000;top:"+T+"px;left:"+S+"px;",html:'<table border="0" cellpadding="0" cellspacing="0" class="info"><tr><td class="fc5" style="line-height:18px;padding:10px;">'+R+'</td></tr></table><div class="du-sd-middleq"></div>'};Q=r.addEl(Q,I.body);s.setTimeout(function(){r.remEl(Q)},1500)},success:function(Q){this.middle1p5s('<span class="ico13"></span>'+Q)},lightErr:function(Q){this.middle1p5s('<span class="ico12"></span>'+Q)},fail:function(Q){this.middle1p5s('<span class="ico11"></span>'+Q)},remSuccess:function(Q){Q=Q==""?"\u8ba2\u9605\u9879":'\u201c<span class="fntB">'+Q+"</span>\u201d";this.success("\u60a8\u5df2\u6210\u529f\u5220\u9664"+Q)},addSuccess:function(Q){this.success('\u60a8\u5df2\u6210\u529f\u6dfb\u52a0\u201c<span class="fntB">'+Q+"</span>\u201d")},rightTop:function(X,S,W){var R,Q="right-top-notice",U=this,V=r.getScrollXY(),T=r.getWindowXY(),Z,Y;Z=V[1]>143?(141+(V[1]-143)):141;Y=T[0]>this.pageWidth?(T[0]-this.pageWidth)/2+7:7;if(!W){R=r.f(Q)}if(!X){R&&(R.style.display="none")}else{if(!R){R={id:W?"":Q,css:"position:absolute;z-index:"+(++d.topLayer)+";height:22px;line-height:22px;background:#fff8c1;padding:0 8px 0 10px;display:none;"};R=r.addEl(R);r.insertBefore(R,I.body.firstChild)}R.style.top=Z+"px";R.style.right=Y+"px";R.innerHTML=S;R.style.display="block";if(W){s.setTimeout(function(){r.remEl(R)},3000)}}},loading:function(Q){this.rightTop(Q,"\u8bf7\u7a0d\u5019...")},clsDialog:(function(){var Q=d.Class.extend({_destroy:function(){r.remEl(this.dom);this.mask&&Q.remIvDiv();delete Q._instances[this.name]},ok:function(){if(!this.onOk||this.onOk()){this._destroy()}},close:function(){if(!this.onClose||this.onClose()){this._destroy()}},init:function(V){var T,aa,U,W,S,Y=++Q.count,R,X=r.getWindowXY(),Z=r.getScrollXY();S={titleIco:"-415px -60px",title:"\u8bf7\u786e\u8ba4",titleIcoh:"11",width:430,cls:"",mode:0,okStr:"\u786e\u5b9a",needCalendar:false,showCancel:true,closeBtn:true,top:false,noDaD:false,noMask:false};m.objExtend(V,S,false);R="name" in V?V.name:Y;if(R in Q._instances){l("dialog :"+R+" exists!");return}W={id:"du-sd-dlg~"+R,css:"width:"+V.width+"px;background:#fff;",cls:V.cls,child:[{tag:"table",width:V.width,cellSpacing:"0",height:"28",cellPadding:"0",border:"0",cls:"titbar",child:{tag:"tbody",child:{child:[{cls:"lf "+x.dlgTitle+(V.noDaD?" nomove":""),css:V.noDaD?"":"cursor:move;",html:'<div style="margin-top:6px;width:16px;height:'+V.titleIcoh+"px;background-position:"+V.titleIco+'" class="ico"></div>'+V.title},{width:"29",child:V.closeBtn?{cls:"close "+M.clickPre+x.dialogCancel}:false},{cls:"ri"}]}}},{cls:"contbor",child:{tag:"table",width:V.width-2,cellSpacing:"0",cellPadding:"0",border:"0",cls:"contbox",child:{tag:"tbody",child:V.body}}},V.onOk||V.showCancel?{tag:"table",width:V.width,cellSpacing:"0",height:"37",cellPadding:"0",border:"0",cls:"btnbar",child:{tag:"tbody",child:{child:[{cls:"lf"},{cls:"dlg-error-notice",html:"&nbsp;",css:"text-align:right;color:#f00;padding-right:10px;"},V.onOk?{width:"89",child:{tag:"a",href:"javascript:void(0)",cls:"btn2 "+M.clickPre+x.dialogOk,text:V.okStr}}:false,V.showCancel?{width:"83",child:{tag:"a",href:"javascript:void(0)",cls:"btn2 "+M.clickPre+x.dialogNo,text:"\u53d6\u6d88"}}:false,{cls:"ri"}]}}}:{tag:"table",width:V.width,cellSpacing:"0",height:"14",cellPadding:"0",border:"0",cls:"nobtnbar",child:{tag:"tbody",child:{child:[{cls:"lf"},{html:"&nbsp;"},{cls:"ri"}]}}}]};V.noMask||Q.addIvDiv();T=r.addEl({css:"position:absolute;z-index:"+(++d.topLayer),child:W},I.body);aa=V.top===false?(X[1]-T.clientHeight)/2+Z[1]-100:V.top;U=(X[0]-T.clientWidth)/2+Z[0];if(aa<1){aa=1}T.style.top=aa+"px";T.style.left=U+"px";if(V.needCalendar){D.calendar.attach(T)}this.name=R;this.dom=T;this.onOk=V.onOk;this.onClose=V.onClose;this.mask=!V.noMask;this.error=function(ab){r.f(".dlg-error-notice",T).innerHTML=ab};Q._instances[R]=this}});Q.addIvDiv=(function(){var R=function(X){var Z=arguments.callee,T=Z.idPrefix,V=++Z.ivCount,Y=X?"#000":"transparent",S=r.addEl({cls:"ivDiv",css:"position:absolute;top:0px;left:0px;background:"+Y+";opacity:0.8;filter:alpha(opacity=80);",id:T+V},I.body),W=d.config.ua.ie==6,aa='<table border="0" style="background:transparent;left:0px;top:0px;"><tr><td><div>&nbsp;</div></td></tr></table>';if(W){aa='<iframe style="filter:alpha(opacity=0);position:absolute;top:300px;left:0;z-index:-1;" frameborder="0"></iframe>'+aa}S.innerHTML=aa;Z.ajSize(null,S);S.style.zIndex=++d.topLayer;if(V>1){var U=r.f(T+(V-1));U.style.background="transparent";q.off(s,"resize",arguments.callee.ajSize)}q.on(s,"resize",arguments.callee.ajSize)};R.ivCount=0;R.idPrefix="du-popup-ivdiv";R.ajSize=function(S,W){W=W||r.f(R.idPrefix+R.ivCount);var U=r.getDocumentXY(),T=W.style,V=W.firstChild.style;T.width="auto";T.height="auto";T.width=U[0]+"px";T.height=U[1]+"px";V.width=U[0]+"px";V.height=U[1]+"px"};return R}).call(s);Q.remIvDiv=function(){var S=this.addIvDiv,T=S.ivCount;if(T>0){S.ivCount--;d.topLayer--;q.off(s,"resize",S.ajSize);r.remEl(S.idPrefix+T);if(T>1){var R=r.f(S.idPrefix+(T-1));R.style.background="transparent";q.on(s,"resize",S.ajSize)}}};Q.count=0;Q._instances={};return Q}()),dialogs:{stockremove:function(V){var R,S="stockrem",Q=D.notice.clsDialog,U,T;if(S in Q._instances){return}T=r.$("th",r.f(V))[1];U=(T&&T.firstChild&&T.firstChild.innerHTML)||V.split("~")[1].substr(2);R=new Q({name:"stockrem",titleIco:"-415px -60px",titleIcoh:"14",title:"\u5220\u9664\u80a1\u7968",body:{child:[{css:"padding-right:24px;height:106px;",align:"right",child:{tag:"img",width:"38",height:"38",src:"http://mat1.gtimg.com/finance/stock/pstock/ico6.png"}},{width:"316",cls:"fs14",html:'\u786e\u8ba4\u5220\u9664\u80a1\u7968<span class="fntB">'+U+"</span>\uff1f<br>"}]},onOk:function(){D.list.removeByTrId(V);return true}});r.f("."+M.clickPre+x.dialogOk,R.dom).focus()},groupremove:function(V){var R,S="grprem",Q=D.notice.clsDialog,T,U=D.group.data;if(S in Q._instances){return}T=V&&V.split&&V.split("-");T=T&&T[1];if(T in U){V=T;T=U[V];R=new Q({name:S,titleIco:"-415px -60px",titleIcoh:"14",title:"\u5220\u9664\u7ec4\u5408",body:{child:[{css:"padding-right:24px;height:106px;",align:"right",child:{tag:"img",width:"38",height:"38",src:"http://mat1.gtimg.com/finance/stock/pstock/ico6.png"}},{width:"316",cls:"fs14",html:'\u786e\u8ba4\u5220\u9664\u7ec4\u5408<span class="fntB">'+T+"</span>\uff1f<br>\u8be5\u7ec4\u5408\u4e0b\u6240\u6709\u80a1\u7968\u5c06\u4e00\u8d77\u88ab\u5220\u9664"}]},onOk:function(){D.group.remove(V);return true}});r.f("."+M.clickPre+x.dialogOk,R.dom).focus()}},groupnew:function(){var R,S="grpnew",Q=D.notice.clsDialog,T="new-group-name";if(S in Q._instances){return}R=new Q({name:S,titleIco:"-369px -78px",title:"\u521b\u5efa\u7ec4\u5408",body:[{child:[{width:"147",height:"53",vAlign:"bottom",align:"right",text:"\u8bf7\u8f93\u5165\u7ec4\u5408\u540d\u79f0\uff1a"},{vAlign:"bottom",child:{tag:"input",id:T,type:"text",css:"width:200px;margin-bottom:4px;",cls:"inputbox2"}}]},{child:[{html:"&nbsp;",height:"53"},{vAlign:"top",cls:"fc11",text:"(\u7ec4\u5408\u540d\u79f0\u4e0d\u8d85\u8fc74\u4e2a\u6c49\u5b57\u62168\u4e2a\u5b57\u7b26)"}]}],onOk:function(){var V=r.f("new-group-name").value,U=D.group;if(U.isLegalName(V,this)){U.add(V);return true}}});r.f(T).select()},grouprename:function(U){var R,S="dlgren",Q=D.notice.clsDialog,T="change-group-name";U=U&&U.split&&U.split("-");U=U&&U[1];if(S in Q._instances){return}R=new Q({name:S,titleIco:"-392px -60px",title:"\u66f4\u6539\u540d\u79f0",body:[{child:[{width:"147",height:"53",vAlign:"bottom",align:"right",text:"\u8bf7\u8f93\u5165\u65b0\u540d\u79f0\uff1a"},{vAlign:"bottom",child:{tag:"input",id:T,type:"text",css:"width:200px;margin-bottom:4px;",cls:"inputbox2",value:D.group.data[U]}}]},{child:[{html:"&nbsp;",height:"53"},{vAlign:"top",cls:"fc11",text:"(\u7ec4\u5408\u540d\u79f0\u4e0d\u8d85\u8fc74\u4e2a\u6c49\u5b57\u62168\u4e2a\u5b57\u7b26)"}]}],onOk:function(){var W=r.f(T).value,V=D.group;if(V.isLegalName(W,this)){V.rename(W);return true}}});r.f(T).select()},noteedit:function(Z){var W,Q="aldlg",V=D.notice.clsDialog,X,R="noteedit-content",Y=M.noteHint,T,S,U;if(Q in V._instances){return}X=D.list.data[Z];X=X&&X[3]&&D.list.note2Html(X[3])||Y;T=s["v_r_"+Z]||s["v_"+Z]||s["v_s_"+Z]||s["v_s_jj"+Z.substr(2)];if(!T){l("no data for: "+Z);return}T=T.split("~");if(s["v_r_"+Z]){S=T[35]}else{S=T[3]}if(T[0]==="1"&&m.startWith(T[2],"90")){U="US"}else{if(T[0]==="51"&&m.startWith(T[2],"20")){U="HK"}else{U=""}}W=new V({name:Q,titleIco:"-369px -78px",titleIcoh:"11",title:"\u6dfb\u52a0\u5907\u6ce8",body:{child:{vAlign:"top",child:[{tag:"table",css:"width:410px;height:42px",border:"0",align:"center",cellSpacing:"0",cellPadding:"0",child:{tag:"tbody",child:{tag:"tr",child:[{child:[{tag:"span",cls:"fntHei fs20 fc1",title:T[1],text:m.truncate(T[1],18,"..")},{tag:"_text",text:"("+Z.substr(2)+")"},{tag:"span",css:"padding-left:10px;",text:"\u5f53\u524d\u4ef7\uff1a"},{tag:"span",cls:"fntB fntTahoma",html:j.GET_COLOR(S,T[32])},{tag:"span",cls:"fc11 fntTahoma",css:"padding-left:4px;",text:U}]},{align:"right",cls:"fc11 fntTahoma",text:""}]}}},{css:"width:426px;",child:{tag:"table",width:"378",border:"0",align:"center",cellSpacing:"0",cellPadding:"0",child:{tag:"tbody",child:[{tag:"tr",child:{height:"34",vAlign:"bottom",cls:"l30",text:"\u8bf7\u8f93\u5165\u5907\u6ce8\u4fe1\u606f\uff1a"}},{tag:"tr",child:{child:{tag:"textarea",id:R,cls:["inputbox2",M.clickPre+x.noteText],css:"width:376px;height:57px;margin-bottom:10px;font-size:12px;",value:X}}}]}}}]}},onOk:function(){var ab=r.v(R),aa=true;if(ab.length>P.maxNoteLength){this.error("\u5907\u6ce8\u4fe1\u606f\u4e0d\u80fd\u8d85\u8fc7120\u4e2a\u5b57");aa=false}else{if(ab!=Y&&ab!=X){D.list.editNote(Z,ab)}}return aa}});setTimeout(function(){r.f(R).select()},200)},bledit:function(W,aq,aj){var am,ay="bldlg",Q=D.notice.clsDialog,al,ao,at,X,Z,ah,ar,ak,T,av=D.balance,au,ae,ai=D.list.data[W],ac,ax,S,U,R=M.blErr,aj,aa,Y,an,aw,ag,ap,V,ad,af;if(ay in Q._instances){return}U=D.list.usQtSaMap[W]||W;Y=D.marketTab.current==="jj";al=s["v_"+(aj?"r_"+W:(Y?D.fund.mapSb2Qt[W]:W))];if(!al){l("no data for: "+W);return}an=true;V=false;al=al.split("~");if(Y){aa="jj"}else{aa=D.marketTab.getMarketFromNum(al[0])}ac="\u4ea4\u6613\u8d39\u7387\u2030";aw=al[2];if(al[0]=="100"&&ai[2]!="idx"){au=al[35];ae="\u9ed8\u8ba4\u4ea4\u6613\u8d39\u7387\u4e3a3.710\u2030 (2.5\u2030\u4f63\u91d1+1\u2030\u5370\u82b1\u7a0e+0.06\u2030\u4ea4\u6613\u5f81\u8d39+\u80a1\u4efd\u4ea4\u6536\u8d390.1\u2030+\u4ea4\u6613\u8d390.05\u2030)";S="3.710"}else{if(al[0]=="1"||al[0]=="51"){if(ai[2]=="stka"||ai[2]=="stkb"||ai[2]=="cf"||ai[2]=="etf"||ai[2]=="bonds"||ai[2]=="wrrts"){au=al[3];ae="\u9ed8\u8ba4\u4ea4\u6613\u8d39\u7387\u4e70\u5165\u65f6\u4e3a1.5\u2030; \u5356\u51fa\u65f6\u4e3a2.5\u2030 (1.5\u2030 \u4ea4\u6613\u8d39\u7387+1\u2030 \u5370\u82b1\u7a0e)";S="1.5"}}else{if(al[0]=="200"){au=al[3];ae=false;ac="\u4ea4\u6613\u8d39\u7528";S="0"}else{if(ai[2]=="of"||ai[2]=="lof"){au=al[3];ac="\u8d39\u7387%";S="1.5";aw=al[0];an=false;ae="\u9ed8\u8ba4\u8d39\u7387\u4e3a\u8be5\u57fa\u91d1\u7684\u7533\u8d2d\u8d39\u7387"}}}}if(al[0]==="1"&&m.startWith(al[2],"90")){af="US"}else{if(al[0]==="51"&&m.startWith(al[2],"20")){af="HK"}else{af=""}}ag=[{css:"padding-left:9px;width:50px;",text:"\u5e8f\u53f7"},{width:"89",text:"\u7c7b\u578b"},{width:"108",text:"\u65e5\u671f"},{width:"123",text:"\u80a1\u6570(\u80a1)"},{width:"85",text:"\u4ef7\u683c"},{width:"136",child:{cls:"pos_re",child:[{tag:"_text",text:ac},{tag:"img",css:"width:16px;height:15px;margin-bottom:-4px;cursor:help;"+(ae?"":"display:none;"),src:"http://mat1.gtimg.com/finance/stock/pstock/ico_ask.png",cls:M.moPre+x.hint},{cls:x.hide,css:"padding: 6px 8px 0pt; width: 175px; line-height: 16px; border: 1px solid rgb(253, 214, 111); background-color: rgb(255, 248, 193); position: absolute;top:20px;left:-50px;",text:ae}]}},{width:"30",text:"\u5220\u9664"}];av.defaultRate=S;av.defaultRowIsRf=!an;av.defaultRowIsUs=al[0]=="200";if(aq.length===1&&aq[0]===""){at=0;X="--";Z="--";ah="--";ar="--";ak="--";T=av.getOneBlDetail([1,true,null,"","",S,!an]);ad=true}else{ad=false;ao=av.getSumFromTrade(aq,al[0]=="200",!an);T=ao[4];if(ao[0]>0){at=ao[0];X=(ao[2]-ao[1])/at;X=Math.round(X*10000)/10000;Z=au-X;ah=(ao[1]-ao[2]+(at*au))/ao[2];if(an){ar=Z*at}else{ar=at*au-ao[2]+ao[1]}ak=au*at;X=an?X.toFixed(2):X.toFixed(4);ah=j.GET_PERCENT((100*ah).toFixed(2),ah);Z=j.GET_SIGNED_COLOR(Z.toFixed(2),Z);ar=j.GET_SIGNED_COLOR(ar.toFixed(0),ar);ak=ak.toFixed(0)}else{if(ao[0]==0){at=ao[0];X="--";ah="--";ak="--";ar=ao[1]-ao[2];Z="--";ar=j.GET_SIGNED_COLOR(ar.toFixed(0),ar)}else{at=ao[0];X="--";ah="--";ak="--";ar="--";Z="--"}}ax=T.length>2?84:(T.length==2?56:40)}if(an){an={width:"207",cls:"savebut",child:[{tag:"a",href:"javascript:void(0)",cls:M.clickPre+x.addBl,child:[{tag:"span",cls:"ico14"},{tag:"_text",text:"\u6dfb\u52a0\u4ea4\u6613"}]}]};ap=ad?false:{tag:"table",css:"width:647px;",border:"0",align:"center",cellSpacing:"0",cellPadding:"0",child:{child:{tag:"tbody",child:[{child:[{css:"padding-left:5px;width:105px;",child:[{tag:"_text",text:"\u4e70\u5165\u5747\u4ef7"}]},{width:"101",child:[{tag:"_text",text:"\u6301\u6709\u91cf(\u80a1)"}]},{width:"98",child:[{tag:"_text",text:"\u5f53\u524d\u5e02\u503c"}]},{width:"108",child:[{tag:"_text",text:"\u6bcf\u80a1\u76c8\u4e8f"}]},{width:"108",child:[{tag:"_text",text:"\u603b\u76c8\u4e8f"}]},{width:"103",child:[{tag:"_text",text:"\u76c8\u4e8f\u7387"}]}]},{child:[{css:"padding-left:5px;width:105px;",child:[{tag:"span",cls:"fntTahoma",text:X}]},{width:"101",child:[{tag:"span",cls:"fntTahoma",text:at}]},{width:"98",child:[{tag:"span",cls:"fntTahoma",text:ak}]},{width:"108",child:[{tag:"span",cls:"fntTahoma",html:Z}]},{width:"108",child:[{tag:"span",cls:"fntTahoma",html:ar}]},{width:"103",child:[{tag:"span",cls:"fntTahoma",html:ah}]}]}]}}}}else{ag.shift();ag.shift();ag.shift();ag[0].css="padding-left:72px";ag[0].width=145;ag[0].child=[{tag:"span",css:"color:#f00",text:"*"},{tag:"_text",text:"\u6295\u5165\u91d1\u989d"}];ag[1].width=150;delete ag[0].text;delete ag[1].text;ag[1].child=[{tag:"span",css:"color:#f00",text:"*"},{tag:"_text",text:"\u6301\u6709\u4efd\u989d"}];ag[2].child.child={tag:"_text",text:"\u4efd\u989d\u6210\u672c"};ag[2].width=243;ag[3].width=30;ag[3].text="\u6e05\u7a7a";ap=ad?false:{tag:"table",css:"width:647px;",border:"0",align:"center",cellSpacing:"0",cellPadding:"0",child:{child:{tag:"tbody",child:[{child:[{css:"padding-left:5px;width:65px;",child:[{tag:"_text",text:"\u5f53\u524d\u5e02\u503c\uff1a"}]},{css:"padding-left:5px;width:105px;",child:[{tag:"span",cls:"fntTahoma",text:ak}]},{width:"61",child:[{tag:"_text",text:"\u5f53\u524d\u76c8\u4e8f\uff1a"}]},{width:"108",child:[{tag:"span",cls:"fntTahoma",html:ar}]},{width:"55",child:[{tag:"_text",text:"\u6536\u76ca\u7387\uff1a"}]},{width:"108",child:[{tag:"span",cls:"fntTahoma",html:ah}]}]}]}}};V={child:[{tag:"span",css:"color:#f00;padding-left:30px;",text:"*"},{tag:"_text",text:"\u4e3a\u5fc5\u586b\u9879\uff0c\u8bf7\u60a8\u586b\u5165\u5f53\u524d\u603b\u7684\u6295\u5165\u91d1\u989d\u548c\u6301\u6709\u4efd\u989d\uff0c\u6211\u4eec\u4f1a\u4e3a\u60a8\u8ba1\u7b97\u5176\u4ed6\u7684\u76c8\u4e8f\u72b6\u51b5\u3002"}]}}am=new Q({name:ay,width:668,cls:"jiaoyi",titleIco:"-417px -75px",titleIcoh:"14",title:"\u76c8\u4e8f\u8ba1\u7b97",okStr:"\u4fdd\u5b58\u5e76\u5173\u95ed",needCalendar:true,body:{child:{vAlign:"top",child:[{tag:"table",css:"width:647px;height:42px",border:"0",align:"center",cellSpacing:"0",cellPadding:"0",child:{tag:"tbody",child:{tag:"tr",child:[{child:[{tag:"span",cls:"fntHei fs20 fc1",title:al[1],text:m.truncate(al[1],18,"..")},{tag:"_text",text:"("+aw+")"},{tag:"span",css:"padding-left:10px;",text:"\u5f53\u524d\u4ef7\uff1a"},{tag:"span",cls:"fntB fntTahoma",html:j.GET_COLOR(au,al[32])},{tag:"span",cls:"fc11 fntTahoma",css:"padding-left:4px;",text:af}]},{align:"right",cls:"fc11 fntTahoma",text:""}]}}},ap,{cls:"hr10",css:"height:12px;"},{tag:"table",css:"width:647px;height:27px;background:#EFF0F6;border-top:1px solid #D7DCEF;border-bottom:1px solid #D7DCEF; line-height:25px;",border:"0",align:"center",cellSpacing:"0",cellPadding:"0",child:{child:{tag:"tbody",child:{child:ag}}}},{tag:"ul",cls:"list",css:"height:"+ax+"px;",child:T},{tag:"table",css:"width:647px;height:38px;",border:"0",align:"center",cellSpacing:"0",cellPadding:"0",child:{tag:"tbody",child:[V,{child:[{child:[{id:R,cls:"SaLC fc2",css:"width:536px;height:20px;line-height:20px; background-color:#FFF8C1;text-align:left;visibility:hidden;",child:[{cls:"ico16",tag:"span"},{tag:"_text",text:""}]}]},an]}]}}]}},onOk:function(){var ab=[],az,aA,aB;m.e(r.$(".list li",am.dom),function(aC){aC=aC.firstChild;if(av.defaultRowIsRf){az=["buy"];aB=new Date();aA=[aB.getFullYear(),aB.getMonth()+1,aB.getDate()].join("-");az.push(aA);aA=aC.childNodes[2].value;az.push(aA);aA=aC.childNodes[1].value;az.push(aA);aA="0";az.push(aA)}else{if(aC.childNodes[2].firstChild.firstChild.selected){az=["buy"]}else{az=["sell"]}aA=aC.childNodes[3].value;az.push(aA);aA=aC.childNodes[5].value;az.push(aA);aA=aC.childNodes[6].value;az.push(aA);aA=aC.childNodes[7].value;az.push(aA)}if(az[2]!=0||az[3]!=0){ab.push(az)}});if(av.isBlDataLegal(ab,av.defaultRowIsRf)){av.save(W,ab,aa,aj);return true}}})},aledit:function(U,ae,Z,W){var ag,aj="aldlg",Q=D.notice.clsDialog,ad,S,ah=[],T,aa,R=M.blErr,ac=false,af,X,Y,ai=false,V,ab;if(aj in Q._instances){return}T=M.alIptCtn;S=D.list.usQtSaMap[U]||U;ad=s["v_r_"+U]||s["v_"+U]||s["v_s_"+U]||s["v_s_jj"+U.substr(2)];if(!ad){l("no data for: "+U);return}ad=ad.split("~");if(ad[0]==="1"&&m.startWith(ad[2],"90")){aa="US"}else{if(ad[0]==="51"&&m.startWith(ad[2],"20")){aa="HK"}else{aa=""}}af=D.list.data[U][2];Y=false;if(af!="cf"&&af!="etf"){if(af=="of"||af=="lof"){af=false;X=false;ai=true}else{X=(ad[0]==="1"||ad[0]==="51");Y=X;af=true}}else{af=false;X=false}if(Z){ah[0]="5.00";ah[1]=ad[3];ah[2]=ad[3]}else{ah[0]=ae[1];ah[1]=ae[3];ah[2]=ae[5];if(ae[0]=="1"||ae[2]=="1"||ae[4]=="1"||ae[6]=="1"||ae[7]=="1"||ae[8]=="1"){ac=true}}if(ah[1]==0){ah[1]=ad[4]}if(ah[2]==0){ah[2]=ad[4]}V=(ah[1]-ad[3])/ad[3]*100;ab=(ad[3]-ah[2])/ad[3]*100;V=m.isNumber(V)?V:"--";ab=m.isNumber(ab)?ab:"--";ah[0]=(ah[0]-0).toFixed(2);ag=new Q({name:aj,width:470,titleIco:"-369px -60px",titleIcoh:"15",title:"\u81ea\u9009\u80a1\u63d0\u9192",body:[{child:{css:"border-bottom:1px solid #D9E1F6;height:43px;",child:{tag:"table",width:441,border:0,align:"center",cellPadding:"0",cellSpacing:"0",child:{tag:"tbody",child:{child:{width:441,child:[{tag:"a",cls:"fc1 fUL",css:"float:right;",text:"\u67e5\u770b\u5386\u53f2\u63d0\u9192\u6d88\u606f",href:"http://stockapp.finance.qq.com/pstock/msgbox.php?tab=1",target:"_blank"},{tag:"span",cls:"fntHei fs20 fc1",text:ad[1]},{tag:"_text",text:"("},{tag:"span",cls:"fntTahoma",text:ai?ad[0]:ad[2]},{tag:"_text",text:")"},{tag:"span",css:"padding-left:10px;",text:"\u5f53\u524d\u80a1\u4ef7\uff1a"},{tag:"span",cls:"fntTahoma",child:[{tag:"span",cls:"fntB",html:j.L_PRICE(ad)},{tag:"span",cls:"fc11",css:"padding-left:4px;",text:aa}]}]}}}}}},{child:{id:T,height:140,vAlign:"top",css:"border-top:1px solid #fff;",child:[{cls:"SaLC pos_re",css:"line-height:30px;width:440px;",child:[{tag:"span",cls:"fc11",text:"\u51fa\u73b0\u4ee5\u4e0b\u60c5\u51b5\u65f6\uff0c\u60a8\u4f1a\u6536\u5230QQ\u6d88\u606f\u63d0\u9192"},{tag:"img",css:"width:16px;height:15px;margin-bottom:-4px;cursor:help;",src:"http://mat1.gtimg.com/finance/stock/pstock/ico_ask.png",cls:M.moPre+x.hint},{cls:x.hide+" "+M.moPre+x.hintTarget,css:"padding: 6px 8px 5px; width: 175px; line-height: 16px; border: 1px solid rgb(253, 214, 111); background-color: rgb(255, 248, 193); position: absolute;top:22px;left:205px;",child:[{tag:"_text",text:"QQ\u6d88\u606f\u662f\u6307\u5f53\u60a8\u5f00\u7740QQ\u804a\u5929\u5de5\u5177\u65f6\uff0c\u7535\u8111\u53f3\u4e0b\u89d2QQ\u5f39\u51fa\u7684\u5c0f\u6d88\u606f\u63d0\u793a\u6846"}]}]},{cls:"hr4"},{cls:"fc11",css:"padding-left:15px;line-height:22px;",text:"\u80a1\u4ef7\u63d0\u9192"},ai?false:{tag:"table",width:452,border:0,cellPadding:0,cellSpacing:0,css:"margin-left:14px;",child:{tag:"tbody",child:{child:[{width:30,align:"center",html:'<input id="du-sd-al-lb1" type="checkbox"'+(ae[0]=="1"?' checked="checked"':"")+"/>"},{width:110,child:{tag:"label",htmlFor:"du-sd-al-lb1",text:"\u5f00\u76d8\u540e\u6da8\u8dcc\u5e45\u8d85\u8fc7"}},{width:66,child:{tag:"input",css:"width:54px;ime-mode:disabled;",value:ah[0],cls:M.keyUpPre+"ala inputbox2",maxLength:7}},{width:21,cls:"fntTahoma",text:"%"},{cls:"fc11",text:"(\u6bcf\u65e5\u6700\u591a\u4e00\u6b21)"}]}}},ai?false:{tag:"table",width:452,border:0,cellPadding:0,cellSpacing:0,css:"margin-left:14px;",child:{tag:"tbody",child:{child:[{width:30,align:"center",html:'<input id="du-sd-al-lb2" type="checkbox"'+(ae[2]=="1"?' checked="checked"':"")+"/>"},{width:110,child:{tag:"label",htmlFor:"du-sd-al-lb2",text:"\u80a1\u4ef7\u4e0a\u6da8\u8fbe\u5230\u6216\u9ad8\u4e8e"}},{width:66,child:{tag:"input",css:"width:54px;ime-mode:disabled;",value:ah[1],cls:M.keyUpPre+"alb inputbox2",maxLength:9}},{text:"\u5143"},{cls:"fc11",child:[{tag:"span",text:"(\u5373\u6bd4\u73b0\u4ef7\u4e0a\u6da8\u8d85\u8fc7"},{id:"du-sd-al-ut",tag:"span",cls:"fntTahoma",text:h(V,0,2)},{tag:"span",text:"%\uff09"}]}]}}},ai?false:{tag:"table",width:452,border:0,cellPadding:0,cellSpacing:0,css:"margin-left:14px;",child:{tag:"tbody",child:{child:[{width:30,align:"center",html:'<input id="du-sd-al-lb3" type="checkbox"'+(ae[4]=="1"?' checked="checked"':"")+"/>"},{width:110,child:{tag:"label",htmlFor:"du-sd-al-lb3",text:"\u80a1\u4ef7\u4e0b\u8dcc\u8fbe\u5230\u6216\u4f4e\u4e8e"}},{width:66,child:{tag:"input",css:"width:54px;ime-mode:disabled;",value:ah[2],cls:M.keyUpPre+"ald inputbox2",maxLength:9}},{text:"\u5143"},{cls:"fc11",child:[{tag:"span",text:"(\u5373\u6bd4\u73b0\u4ef7\u4e0b\u8dcc\u8d85\u8fc7"},{id:"du-sd-al-dt",tag:"span",cls:"fntTahoma",text:h(ab,0,2)},{tag:"span",text:"%\uff09"}]}]}}},af?{css:"margin:5px 14px;border-top:1px dotted #ccc;"}:false,af?{cls:"fc11",css:"padding-left:15px;line-height:22px;",text:"\u8d44\u8baf\u63d0\u9192"}:false,af?{tag:"table",width:452,border:0,cellPadding:0,cellSpacing:0,css:"margin-left:14px;",child:{tag:"tbody",child:{child:[{width:30,align:"center",html:'<input id="du-sd-al-nt" type="checkbox"'+(ae[6]=="1"?' checked="checked"':"")+"/>"},{child:{tag:"label",htmlFor:"du-sd-al-nt",text:"\u5f53\u6709\u6700\u65b0\u516c\u53f8\u516c\u544a\u65f6"}}]}}}:false,X?{tag:"table",width:452,border:0,cellPadding:0,cellSpacing:0,css:"margin-left:14px;",child:{tag:"tbody",child:{child:[{width:30,align:"center",html:'<input id="du-sd-al-nt2" type="checkbox"'+(ae[7]=="1"?' checked="checked"':"")+"/>"},{child:{tag:"label",htmlFor:"du-sd-al-nt2",text:"\u5f53\u6709\u6700\u65b0\u7814\u7a76\u62a5\u544a\u65f6"}}]}}}:false,Y?[{css:"margin:5px 14px;border-top:1px dotted #ccc;"},{cls:"fc11",css:"padding-left:15px;line-height:22px;",child:[{_t:"\u7279\u8272\u63d0\u9192"},{tag:"span",css:"color:#d34;",text:"(\u65b0)"}]},{tag:"table",width:452,border:0,cellPadding:0,cellSpacing:0,css:"margin-left:14px;",child:{tag:"tbody",child:{child:[{width:30,align:"center",html:'<input id="du-sd-al-sp1" type="checkbox"'+(ae[8]=="1"?' checked="checked"':"")+"/>"},{child:[{tag:"label",htmlFor:"du-sd-al-sp1",text:"\u5f53\u51fa\u73b0KDJ\u91d1\u53c9\u6216\u6b7b\u53c9\u65f6"},{cls:"pos_re",css:"margin-left:20px;display:inline;",child:[{tag:"span",cls:"fc11",css:"background:url(http://mat1.gtimg.com/finance/stock/pstock/ico_ask.png) no-repeat;padding-left:20px;cursor:help;",text:"\u4ec0\u4e48\u662f\u91d1\u53c9\u548c\u6b7b\u53c9",cls:M.moPre+x.hint},{cls:x.hide+" "+M.moPre+x.hintTarget,css:"padding: 6px 8px 5px; width: 175px; line-height: 16px; border: 1px solid rgb(253, 214, 111); background-color: rgb(255, 248, 193); position: absolute;top:-77px;left:3px;",child:[{tag:"_text",text:"KDJ\u91d1\u53c9\u662f\u6307K\u3001D\u3001J\u4e09\u7ebf\u90fd\u5904\u4e8e20\u7ebf\u4ee5\u4e0b\u65f6\uff0c\u4e00\u65e6J\u7ebf\u548cK\u7ebf\u51e0\u4e4e\u540c\u65f6\u5411\u4e0a\u7a81\u7834D\u7ebf\u65f6..."},{tag:"a",href:"http://user.qzone.qq.com/735580735/blog/1287998887",text:"\u70b9\u51fb\u67e5\u770b\u66f4\u591a",cls:"fr fc1",target:"_blank"}]}]}]}]}}}]:false,ai?{tag:"table",width:452,border:0,cellPadding:0,cellSpacing:0,css:"margin:0 0 0 14px;",child:{tag:"tbody",child:[{child:[{width:30,align:"center",html:'<input id="du-sd-al-rfv" type="checkbox"'+(ae[0]=="1"?' checked="checked"':"")+"/>"},{child:{tag:"label",htmlFor:"du-sd-al-rfv",text:"\u5f53\u6709\u6700\u65b0\u51c0\u503c\u65f6"}}]},{child:[{html:"&nbsp;"},{css:"color:#999;",text:"\uff08\u6211\u4eec\u4f1a\u83b7\u53d6\u6700\u53ca\u65f6\u7684\u51c0\u503c\u4fe1\u606f\uff0c\u5728\u60a8\u8ba2\u9605\u4e4b\u540e\uff0c\u7b2c\u4e00\u65f6\u95f4\u901a\u77e5\u60a8\uff09"}]}]}}:false,{id:R,cls:"SaLC fc2",css:"width:452px;height:20px;line-height:20px; background-color:#FFF8C1;text-align:left;visibility:hidden;",child:[{cls:"ico16",tag:"span"},{tag:"_text",text:""}]}]}}],onOk:function(){var al=r.$("#"+T+" input"),ak=[],an=D.balance,am=false;m.e(al,function(ao){ak.push(ao.value===""?"0":ao.value)});if(!ai){m.e(m.w("0 2 4 6 7 8"),function(ao){ak[ao]=al[ao]&&al[ao].checked?"1":"0"});if(ac&&ak[0]=="0"&&ak[2]=="0"&&ak[4]=="0"&&ak[6]=="0"&&ak[7]=="0"&&ak[8]=="0"){am=true}}else{ak[0]=al[0].checked?"1":"0";if(ak[0]=="0"){am=true}}if(an.isAlDataLegal(ak,ai)){if(!ai){if(ak[0]=="0"){ak[1]=m.isInt(ak[1])||m.isFloat(ak[1])?ak[1]:0}if(ak[2]=="0"){ak[3]=m.isInt(ak[3])||m.isFloat(ak[3])?ak[3]:0}if(ak[4]=="0"){ak[5]=m.isInt(ak[5])||m.isFloat(ak[5])?ak[5]:0}}an.saveAl(U,ak,am,W);return true}}});ag.error('<a href="javascript:void(0)" style="float:left;color:#1044BA;margin-left:20px;" class="'+M.clickPre+x.alCancel+'">\u6e05\u7a7a</a>');r.f("."+M.clickPre+x.dialogOk,ag.dom).focus()}},bubbleShow:false,bubbleDiv:null,bubbleHl:null,bubble:function(U,V){var Q=this.bubbleDiv,Y,S;if(!Q){Q=r.addEl({css:"top:0;left:0;position:absolute;visibility:hidden;",child:[{css:"padding:8px 15px;width:228px;line-height:18px;border:1px solid #FDD66F;background-color:#FFF8C1;text-indent:2em;position:absolute;"},{tag:"iframe",css:"position:absolute;left:0;top:0;filter:alpha(opacity=0);opacity:0;"}]},I.body);this.bubbleDiv=Q}Y=Q.firstChild;S=Y.nextSibling;S.style.zIndex=++d.topLayer;Y.style.zIndex=++d.topLayer;Q.style.zIndex=d.topLayer;if(U===false){Q.style.visibility="hidden";q.off(I,"mousemove",this.bubbleHl);this.bubbleShow=false;this.bubbleHl=null;return}Y.innerHTML="";r.addText(Y,V);g(Y);var X=Y.offsetWidth,T=Y.offsetHeight,Z=r.getWindowXY(),aa=r.getScrollXY(),R=U.clientX+aa[0]+17+X<Z[0]+aa[0]?U.clientX+aa[0]-260:U.clientX+aa[0]-8-X,W=U.clientY+aa[1]+17+T<Z[1]+aa[1]?U.clientY+aa[1]+17:U.clientY+aa[1]-5-T;Q.style.left=R+10+"px";Q.style.top=W+10+"px";S.style.width=X+3+"px";S.style.height=T+3+"px";Q.style.visibility="visible";this.bubbleShow=true;this.bubbleHl=function(ae){var ae=ae||window.event,ag=D.notice.bubbleDiv,ab=r.getWindowXY(),af=r.getScrollXY(),ad=ae.clientX+af[0]+0+X<ab[0]+af[0]?ae.clientX+af[0]-260:ae.clientX+af[0]-8-X,ac=ae.clientY+af[1]+17+T<ab[1]+af[1]?ae.clientY+af[1]+17:ae.clientY+af[1]-5-T;ag.style.left=ad+"px";ag.style.top=ac+"px"};q.on(I,"mousemove",this.bubbleHl);Y=null;S=null;Q=null}},group:{data:{},count:0,current:false,dropingMenu:null,events:{liOver:function(){r.addClass(this,"iehover")},liOut:function(){r.remClass(this,"iehover")}},switchTo:function(Q){var R=this.current&&r.f("#groups-"+this.current+" div");R&&L(R);if(Q!==this.current&&this.data[Q]){C(r.f("groups-"+Q),"on","li");this.current=Q;D.list.setHash()}},isLegalName:function(T,Q){var R=false,S=0;if(!T.match(m.getReg("^[\\u2E80-\\uFE4Fa-zA-Z0-9]+$"))){R=true}else{m.e(T.split(""),function(U){if(U.charCodeAt(0)<=255){S+=1}else{S+=2}});R=S>8}Q.error(R?"\u540d\u79f0\u5fc5\u987b\u662f4\u4e2a\u6c49\u5b57\u62168\u4e2a\u534a\u89d2\u6570\u5b57\u6216\u82f1\u6587":"");return !R},getOneTab:function(T,Q){var S=this.events,R=r.addEl({tag:"li",id:"groups-"+T,cls:M.clickPre+x.groupTab,child:[{tag:"span",cls:["drbtn",M.clickPre+x.groupDrop,M.moPre+x.grpBtn]},{cls:x.hide,child:[{tag:"a",href:"javascript:void(0)",cls:M.clickPre+x.groupRename,child:{tag:"span",cls:"ico3"},text:M.changeName},{tag:"a",href:"javascript:void(0)",cls:M.clickPre+x.groupRem,child:{tag:"span",cls:"ico4"},text:M.deleteGroup}]}]});r.insertAfter(I.createTextNode(Q),r.f(".drbtn",R));if(G.ie){R.onmouseover=S.liOver;R.onmouseout=S.liOut}return R},show:function(){J("group");r.remClass(r.f("dayquotes"),x.top);L("all-top-hr");L("toptimectn");L("addgroup");r.insertAfter(r.f("marstat"),r.f("addstock"))},hide:function(T){var V=D.marketTab.current,Q=r.f("toptimectn"),U=r.f("all-top-hr"),S=r.f("marstat"),R="addgroup";L("group");r.addClass(r.f("dayquotes"),x.top);if(T){L(R);L(Q);J(U)}else{if(V!="all"&&V!="jj"){L(U);if(this.count===1){Q.appendChild(S);J(Q);J(R)}else{r.insertAfter(S,r.f("addstock"));L(Q);L(R)}}else{L(R);L(Q);J(U)}}},removeNoneDefault:function(){var Q=r.$("#mygroup li");L("group");m.e(Q,function(S,R){if(R>0){r.remEl(S)}})},load:function(T){var R=this,S=D.io,Q="getGroup";S.load(S.urls[Q](T),function(V){var U=V.data.group||"";R.fill(U);R.switchTo("0")},Q)},fill:function(V){var R=D.marketTab,U={0:"\u6211\u7684"+R.marketCnMap[R.current]},T=this,Q=m.isString(V)&&V.split("|"),X=I.createDocumentFragment(),W="addgroup-top",S=0;this.removeNoneDefault();if(Q&&Q.length>0){m.e(Q,function(Y){Y=Y&&Y.split("~");if(Y[0]&&Y[1]){U[Y[0]]=Y[1];if(Y[0]!="0"){X.appendChild(T.getOneTab(Y[0],Y[1]))}}});S=X.childNodes.length;if(S===9){L(W)}else{J(W)}if(S>0){r.f("#mygroup ul").appendChild(X)}}this.count=S+1;v("groups-0",U[0]);this.current=false;this.data=U},remove:function(T){var R=this,S=D.io,Q="remGroup";T=s.parseInt(T);if(T>0){S.load(S.urls[Q](T),function(V){var U=V.data.group||"";D.notice.success("\u7ec4\u5408\u5220\u9664\u6210\u529f");D.list.switchTo(null,"0",null)},Q)}H.go(43)},rename:function(S){var R=this,T=D.io,Q="renameGroup";T.load(T.urls[Q](S),function(W){var V=W.data.group||"",X,U;X=R.current;R.fill(V);R.switchTo(X);U=D.list;U.changeCtn(U.isEmpty,false,true)},Q);H.go(42)},add:function(S){var R=this,T=D.io,Q="addGroup";T.load(T.urls[Q](S),function(W){var V=W.data.group||"",U;U=V.split("|");V=U[U.length-1].split("~");D.list.switchTo(null,V[0]||"0",null)},Q);H.go(41)},init:function(){this.fill(k.groups);if(k.activeGroup){this.switchTo(k.activeGroup)}}},marketTab:{current:false,enums:["cn","hk","us","jj","all"],marketSbMap:{all:"ALL",cn:"GP",hk:"HK",jj:"JJ",us:"AS"},marketCnMap:{all:"\u7ec4\u5408",cn:"\u6caa\u6df1",hk:"\u6e2f\u80a1",jj:"\u57fa\u91d1",us:"\u7f8e\u80a1"},getMarketFromNum:function(Q){if(Q==0){Q="jj"}else{if(Q==1||Q==51){Q="cn"}else{if(Q==100){Q="hk"}else{if(Q==200){Q="us"}}}}return Q},switchTo:function(Q){var R=r.f("market-"+Q);if(Q!==this.current&&R){C(R,"on","a");this.current=Q;D.list.setHash();if(D.smartbox.box){D.smartbox.box.typeIpt.value=this.marketSbMap[Q]}}},init:function(){if(k.activeMarket){this.switchTo(k.activeMarket)}}},list:{type:false,activeEntry:null,seledEntry:null,data:{},isEmpty:true,cronIds:{cn:-1,hk:-1,us:-1,hkreal:-1,jj:-1},cronStartCount:{cn:-1,hk:-1,us:-1,hkreal:-1,jj:-1},orders:{},usQtSaMap:{},sortActiveBtn:{cn:null,hk:null,us:null,jj:{of:null,cf:null,etf:null,lof:null}},lazySaveBegin:{cn:null,hk:null,us:null,jj:{of:null,cf:null,etf:null,lof:null}},mapMarketBin:{cn:1,hk:2,us:4,of:8,cf:16,etf:32,lof:64},tdProcessors:[function(S,Q,T){var R;if(T){T.style.cssText="";if(S[0]==="1"&&m.startWith(S[2],"90")){T.className="us"}else{if(S[0]==="51"&&m.startWith(S[2],"20")){T.className="hk"}else{T.className=""}}}R=S[40];if(R&&S[0]!="200"&&R!=="0"){R=R=="S"?"\u505c\u724c":(R=="D"?"\u9000\u5e02":(R=="U"?"\u672a\u4e0a\u5e02":"--"));R='<a href="http://stockhtm.finance.qq.com/'+(S[0]==100?"hk":"sstock")+"/quotpage/q/"+S[2]+'.htm?notice" target="_blank">'+R+"</a>"}else{R=S[3]===w?"--":j.GET_COLOR(S[3],S[32])}return R},function(Q){return j.GET_PERCENT(Q[32],true)},4,5,function(Q){return Q.length>1&&Q[33]!==w&&Q[34]!==w?Q[33]+"/"+Q[34]:"--"},function(Q){var R;if(Q[0]=="100"){R=Q[37]/10000}else{if(Q[0]=="200"){R=Q[36]/10000}else{R=Q[37]/1}}return m.isNumber(R)?R.toFixed(2):"--"},function(Q){var R=Q[45]/1;return m.isNumber(R)?R.toFixed(2):"--"},function(R){var Q;if(R[0]=="100"||R[0]=="200"){Q=R[39]===" "||R[39]==="0"||R[39]==="0.00"||m.isEmpty(R[39])?"--":R[39]}else{Q=R[38]===" "||R[38]==="0"||R[38]==="0.00"||m.isEmpty(R[38])?"--":R[38]+"%"}return Q},function(R,Q,S){if(S){S.style.cssText="";S.className=""}t=R[40];if(t){t=t=="S"?"\u505c\u724c":(t=="D"?"\u9000\u5e02":(t=="U"?"\u672a\u4e0a\u5e02":"--"));t='<a href="http://stockhtm.finance.qq.com/hk/quotpage/q/'+R[2]+'.htm?notice" target="_blank">'+t+"</a>"}else{t=R[35]===w?"--":j.GET_COLOR(R[35],R[32])}return t},function(T,X,S){if(T.length==1){return'<span style="padding-left:4px;">--</span>'}var V=T[1].replace(m.getReg("[\\s\u3000]*","ig"),""),R=9,W=R/2,Q,U;if(V.length>W){for(Q=0;Q<R;Q++){if(R>W){R-=V.charCodeAt(Q)>255?1:0.5}}V=V.substring(0,Math.floor(R))}if(D.marketTab.current=="jj"){U="0"}else{U=T[0]}return'<a href="'+i._getUrlByType(T[2],U)+'" title="'+T[1]+"("+T[2]+')" target="_blank" class="'+M.clickPre+'denter d-nc" rel="'+V+"~"+S+"~"+T[2]+"~"+X+'">'+V+"</a>"},function(Q){return Q[4]===w?"--":Q[4]+"/"+Q[5]},function(Q){var R=Q[37]-0;return m.isNumber(R)?R.toFixed(2):"--"},'<a href="javascript:void(0);" class="'+M.clickPre+x.stockRemove+' ico8"></a>'],setListType:function(Q){if(Q!==this.type){Q=Q==="1"?"1":"0";this.type=Q;this.setHash();C(r.f("list-type-"+Q),"on","a")}},setHash:function(){var Q=D.marketTab.current,T=D.group.current,S=this.type,R=s.location;if(R.hash){R.hash="#"}},setOrderList:function(V,S){var R,Q=D.quotes.quoteNameMarketMap,T=this.orders,W,Z={},X=true,U=D.fund.orders,Y=D.fund.mapSb2Qt;m.e(S?S:m.w("cn hk us jj"),function(aa){T[aa]={base:[],display:[]}});if(!S||S==="jj"){m.e(m.w("cf of lof etf"),function(aa){U[aa]={base:[],display:[]}});Y={};D.fund.mapSb2Qt=Y}W=S?this.data:{};m.e(V,function(ad){var aa,ac,ab,af,ae;if(ad&&ad.split){aa=ad.split("~");if(aa&&aa[0]){X=false;R=aa[0].substr(0,2);ac=aa[0].split(".");if(ac.length>1){Z[ac[0]]=aa[0]}else{if(ac[0].substr(0,2)=="us"){Z[aa[0]]=aa[0]}}ab=Q[R];af=ac[0];if(aa[3]=="cf"||aa[3]=="etf"||aa[3]=="lof"){ab="jj"}if(ab==="jj"){if(aa[3]=="lof"){ae="s_jj"+af.substr(2)}else{if(aa[3]=="of"){ae="s_"+af}else{if(aa[3]=="cf"){ae=af}else{if(aa[3]=="etf"){ae=af}}}}Y[af]=ae;U[aa[3]].base.push(af);U[aa[3]].display.push(af)}T[ab].base.push(af);T[ab].display.push(af);W[ac[0]]=[aa[1],aa[2],aa[3],aa[4],aa[5],aa[6]]}}});this.data=W;this.isEmpty=X;if(!S||S==="us"){this.usQtSaMap=Z}},loadList:function(S,Q,V,X){var U=this,W=D.io,T="getList",R=this.lazySaveBegin;Q=Q||"0";m.e(R,function(Z,Y){if(Y!="jj"){R[Y]=null}else{R[Y]={of:null,cf:null,etf:null,lof:null}}},true);D.notice.loading(true);W.load(W.urls[T](S,Q),function(ab){var Z=ab.data.stock||"",aa=ab.data.group||"",Y=D.group;Z=Z===""?[]:Z.split("|");U.setOrderList(Z);if(V){Y.fill(aa);Y.switchTo(Q)}if(!X){U.changeCtn(Z.length===0,true,true)}else{X()}},T,{market:S,group:Q})},add:function(S,U,W,T){var R=this,V=D.io,Q="addStock";if(S=="jj121099"){D.notice.lightErr("\u6682\u65e0\u8be5\u57fa\u91d1\u6570\u636e\uff0c\u6dfb\u52a0\u5931\u8d25")}else{if(S){V.load(V.urls[Q](S,W,T),function(ab){var aa=ab.data.stock||"",Z=R.sortActiveBtn[W],Y=ab.data.stktype,X=D.marketTab.current;aa=aa.split("|");R.setOrderList(aa);if((X=="all"&&Y=="jj")||(X!="all"&&Y!=X)){R.switchTo(Y,null,null);D.smartbox.box.queryIpt.focus();D.notice.addSuccess(U)}else{R.changeCtn(aa.length===1&&aa[0]==="",true,true,function(){D.smartbox.box.queryIpt.focus();D.notice.addSuccess(U)},true)}},Q)}}H.go(2)},remove:function(S,T){var R=this,V=D.io,U=D.marketTab.current,Q="remStock";if(S){V.load(V.urls[Q](S,U,D.group.current),function(X){var W=X.data.stock||"";W=W.split("|");R.setOrderList(W);D.notice.loading(false);R.changeCtn(W.length===1&&W[0]==="",true,true,function(){D.notice.remSuccess(T)},true)},Q)}H.go(3)},save:function(S,Z,Y){var T=this,V=D.io,W="saveOrder",U=[],X,R,Q=this.usQtSaMap;if(S=="jj"){X=D.fund.orders[Z].moved;R=D.fund.orders[Z].base}else{X=this.orders[S].moved;R=this.orders[S].base}m.e(R,function(aa){if(S=="us"){U.push(Q[aa]+"~"+(X[aa]?"1":"0"))}else{U.push(aa+"~"+(X[aa]?"1":"0"))}});V.load(V.urls[W](S),function(ab){var aa=ab.data.stock||"",ac=D.timeBar;aa=aa.split("|");T.setOrderList(aa,S,Z);if(Y&&S=="hk"){T.changeCtn(T.orders.hk.base.length===0,true,true)}D.notice.rightTop(true,"\u65b0\u7684\u5217\u8868\u987a\u5e8f\u5df2\u4fdd\u5b58",true)},W,{sPost:"stocklist="+U.join("|")});if(Y){H.go(40)}else{H.go(0)}},editNote:function(T,U){var S=this,W=D.io,R="editNote",V=T,Q=this.type;if(m.startWith(V,"us")){V=this.usQtSaMap[V]}Q=Q==="0"?M.linePrefix:M.lineBlPrefix;W.load(W.urls[R](V,U),function(ab){var aa=ab.data.stock||"",Y,X=x.noteIco,Z=x.noteIcoActive;aa=aa.split("~");aa.shift();S.data[T]=aa;if(aa[3]!==""){Y=r.f("."+X,Q+T);if(Y){r.remClass(Y,X);r.addClass(Y,Z)}}else{Y=r.f("."+Z,Q+T);if(Y){r.remClass(Y,Z);r.addClass(Y,X)}}D.notice.rightTop(true,"\u5907\u6ce8\u4fe1\u606f\u5df2\u4fdd\u5b58",true)},R)},addFromSb:function(R,S){var Q=D.smartbox.box.queryIpt;Q.value="\u4ee3\u7801/\u540d\u79f0/\u62fc\u97f3";Q.style.color="#B4B3B3";Q.blur();this.add(R,S,D.marketTab.current,D.group.current)},addFromPb:function(R,Q){var S=s["v_"+(Q=="hk"?"r_":"")+K(R)];if(S&&S.split){S=S.split("~");S=S&&S[1]}if(S){this.add(R,S,D.quotes.quoteNameMarketMap[Q],"0");H.go(36)}},removeByTrId:function(S){var Q=this,R;R=r.$("#"+S+" th a")[1];R=(R&&R.innerHTML)||"";S=S&&S.split&&S.split("~");if(S&&S[1]){this.remove(this.usQtSaMap[S[1]]||S[1],R)}},switchTo:function(U,R,T,Q){var V,S,W=D.marketTab.current;if(U!==null&&U!==W){D.marketTab.switchTo(U);if(U=="jj"){this.setListType("1")}else{this.setListType("0")}if(!Q){this.loadList(U,"0",true)}}else{if(R!==null&&R!==D.group.current){if(W=="hk"){if(D.group.current=="0"){this.purgeListIds(W,this.type=="0",true)}else{if(R=="0"){this.purgeListIds(W,this.type=="0",false)}}}D.group.switchTo(R);if(!Q){this.loadList(W,R,true)}}else{if(T!==null&&T!==this.type){this.setListType(T);this.changeCtn(this.isEmpty,false,true)}}}},create:function(U,X,Q,S){var W=this,V=D.news,T=V.cronIds,R;if(X==="jj"){U?D.fund.create(S):D.fund.createBl(S);m.e(this.sortActiveBtn.jj,function(Y){if(Y){W.sort(r.f(Y),true)}},true)}else{U?this._create(X,Q,S):D.balance._createBl(X,Q,S);if(this.sortActiveBtn[X]){if(X!="hk"||D.group.current!="0"||Q){this.sort(r.f(this.sortActiveBtn[X]),true)}}}V.load(X);if(T[X]&&T[X]!==-1){y.unsubscribe(T[X]);T[X]=-1}R=y.count;T[X]=y.subscribe({interval:31,judge:function(Y){if(Y>R){V.loaded[X]=false;return 2}},onOk:function(){l("reload news for: "+X);V.load(X)}});if(k.action){D.actions.init()}},update:function(S,U,Q,T,R){if(U==="jj"){S?D.fund.update(T,R):D.fund.updateBl(T,R)}else{S?this._update(U,Q):D.balance._updateBl(U,Q)}},_create:function(T,U,V,aa){l("create list for market: "+T+" "+U);var Z=D.marketTab.current==="all",X,R,W,ad=this.tdProcessors,ac,S,Q=this.data,ab,Y=D.group.current==="0";D.timeBar.updateQuoteTime(T,U,aa);if(V){D.timeBar.cronFns.updateMarketStat()}if(T!="jj"){X=this.orders[T];W=r.f("#ul-"+T+" tbody")}else{X=D.fund.orders[aa];W=r.f("#ul-"+aa+"-jj tbody")}X=X.display;X=this._filterNamesByMarket(X,T,U);if(T==="hk"&&U){R="r_"+X.join(",r_");W=r.f("#ul-hk-real tbody");ac=ad[8]}else{R=X.join(",");ac=ad[0]}i.fill(R,W.firstChild,[function(ag,af,ae,ak){var ai,aj=ae.parentNode,ah;if(ag.length==1&&ag[0]==""){S=X[ak];ai=X[ak].substr(2);ai='<span style="padding-left:4px;">'+ai+"</span>";ab=true}else{if(!ag||ag.length<30){S=X[ak];ai=S.substr(2);ai='<span style="padding-left:4px;">'+ai+"</span>"}else{ai=K(ag[2]);ab=false;S=i.MAP_STOCKTYPE[ag[0]]+ai;if(D.marketTab.current=="jj"){ah="0"}else{ah=ag[0]}ai=j.GET_TITLE(ag[2],ah,ai,false,"_blank");ai=ai.replace('">','" class="'+M.clickPre+'denter d-nc">')}}aj.id=M.linePrefix+S;aj.bgColor="";aj.className=x.item;return ai},function(af){var ae=T=="jj"?aa:T;return ad[9](af,ae,S.substr(0,2))},ac,ad[1],ad[2],ad[3],ad[4],ad[5],ad[6],ad[7]," ",function(){var ae="&nbsp;";if(Y&&(T=="cn"||T=="hk"||T=="jj")){ae=Q[S];ae=ae[5]=="1"?x.alarmActive:x.alarmIco;ae='<a href="javascript:void(0);" class="'+ae+" "+M.clickPre+x.alEdit+'"></a>'}return ae},function(){var af="",ae=Q[S];if(ae&&((ae[0]-0!==0)||(ae[1]-0!==0))){af="_ed"}if(ae[2]!="idx"&&!ab){af='<a href="javascript:void(0);" class="ico7'+af+" "+M.clickPre+x.blEdit+'"></a>'}else{af="&nbsp"}return af},function(af){var ae;if(Q[S]&&Q[S][3]!==""){ae=x.noteIcoActive}else{ae=x.noteIco}return ab?"&nbsp":'<a href="javascript:void(0);" class="'+ae+" "+M.moPre+x.note+" "+M.clickPre+x.noteEdit+'"></a>'},ad[12],ad[12]],{showError:true})},_update:function(V,S){l("update list for market: "+V+" "+S);var R=D.marketTab.current==="all",U=this.orders[V],Q,T=this;D.timeBar.updateQuoteTime(V,S);U=U.display;U=this._filterNamesByMarket(U,V,S);m.e(U,function(W){T._updateOne(W,S)})},_updateOne:function(R,T){var Y=r.f(M.linePrefix+R),U=s["v_"+(T?"r_":"")+R],V,X=this.tdProcessors,W,S="",Q,Z;U=U&&U.split("~");if(U&&U.length>10&&Y){V=r.$("td",Y);m.e(V,function(ac,aa){var ab;if(aa===0){if(T){ab=U[35];Z=X[8]}else{ab=U[3];Z=X[0]}W=parseFloat(ac.innerHTML);if(isNaN(W)){W=ac.firstChild;W=W.innerHTML&&parseFloat(W.innerHTML)}if(m.isNumber(W)){if(ab>W){S="\u2191";Q="background:#FFE1E1;width:74px;padding-right:4px;"}else{if(ab<W){S="\u2193";Q="background:#D7F2DC;width:74px;padding-right:4px;"}else{Q=""}}ac.style.cssText=Q;v(ac,i.process(Z,U)+S);return}}v(ac,i.process(X[aa],U))})}else{l("no data for: "+R)}},_filterNamesByMarket:function(S,T,R){var Q;if(T==="hk"&&D.group.current==="0"){Q=m.clone(S);if(R){if(Q.length>P.hkRealCount){m.arrayRemove(Q,P.hkRealCount,Q.length-1)}S=Q}else{if(Q.length>P.hkRealCount){m.arrayRemove(Q,0,P.hkRealCount-1)}else{Q=[]}S=Q}}else{if(T=="jj"){S=D.fund.getQtAryFromSb(S)}else{S=m.clone(S)}}return S},hideRows:function(U,R){var Q,T=this.type==="0",S;S=this.orders[U].base.length;if(U==="hk"){if(R){Q=r.$("#ul-"+(T?"":"bl-")+"hk-real tbody tr");S=Math.min(S,P.hkRealCount)}else{Q=r.$("#ul-"+(T?"":"bl-")+"hk tbody tr");if(D.group.current==="0"){S-=P.hkRealCount}}}else{Q=r.$("#ul-"+(T?"":"bl-")+U+" tbody tr")}m.e(Q,function(W,V){W.id="";if(V>=S){W.className=x.hide}})},purgeListIds:function(T,S,R){var Q;Q=r.$("#ul-"+(S?"":"bl-")+T+(R?"-real":"")+" tbody tr");m.e(Q,function(V,U){V.id=""})},getCronAry:function(S,T,aa,V,Q){var R,X=this,U=P.loadingCycle,Y=S+(T?"real":""),Z=this.cronStartCount,W=D.timeBar,ab=W.binaryMap[S];if(!T){R=[function(ad){var ac=0;if((W.updatingBin&ab)===ab||ad===0){ac=3}return ac},function(ad){var ae,ac;if(ad-Z[Y]===0){X.hideRows(S,T);X.create(aa,S,false,V);if(S=="jj"){ae=X.cronIds.jj;ac=ae.split("-");m.find(D.cron.jobs[ac[1]],function(af){if(af.id==ae){af.qtName=Q;return true}})}}else{X.update(aa,S,false)}},U]}else{R=[function(ad){var ac=0;if(ad===0){ac=3}else{if((W.updatingBin&ab)===ab){ac=(ad-Z[Y]===0)?3:2}}return ac},function(af){var ad=af-Z[Y],ae,ac=D.marketTab.current==="all";if(ad===0){X.hideRows(S,T);X.create(aa,S,true,V)}else{if(ad>=P.hkDelayNoticeSec&&ad<P.hkDelayMaxSec){ae=(af-Z[Y])%60;ae=ae<10?"0"+ae:ae;v("tishi-"+(ac?"hk":"top")+"-time",[Math.floor((ad)/60),"\u5206",ae,"\u79d2"].join(""));J("tishi-"+(ac?"hk":"top"))}else{if(ad>P.hkDelayMaxSec){D.list.updateRealHk()}}}},U]}return R},fillAndSetCron:function(U,V,ae,ab,R,ad,X,S){var Z=this,T=V?"r_"+ab.join(",r_"):ab.join(","),Q,ac=this.cronStartCount,aa=U+(V?"real":""),W=P.loadingCycle,Y;T+=","+D.quotes.defaultQuotes[aa];if(X){T+=",marketStat"}if(R){this.hideRows(U,V);if(ad){ac[aa]=y.count}else{ac[aa]=Math.ceil(y.count/W)*W}}else{this.create(ae,U,V,X)}if(U=="jj"){Q=S.join(",")+(X?",marketStat":"")+","+D.quotes.defaultQuotes.jj}Y=this.getCronAry(U,V,ae,X,Q);this.setupCron(aa,{name:"quotes-"+aa,qtName:T,judge:Y[0],onOk:Y[1],interval:Y[2],noWait:!!(R&&ad)})},setupCron:function(S,R){var Q=this.cronIds;if(Q[S]!=-1){y.unsubscribe(Q[S]);Q[S]=-1}Q[S]=y.subscribe(R)},fillByMarket:function(W,T,S,ak,ad){var ah,ag,ae,ai=false,al=r.f("update-top"),ab=r.f("update-top-s"),af,aj,an,X,am,Y,V,Q=this.type==="0",R=D.fund,ao=function(aq,ap){J(aq);L(ap)},ac,Z=this,aa=false,U;if(W==="empty"){J("empty-list-ctn");r.remClass(r.f("box3"),"hide");J("empty-news");if(!p){QosSS.t[1]=(new Date()).getTime();p=true}return}if(D.marketTab.current=="all"){if((this.mapMarketBin[W]&k.binFold)>0){U=true}}ah=this.orders[W].base;if(!ad){this.orders[W].display=[];this.orders[W].moved={}}if(W!=="jj"){aj=r.f("ul-"+W);X=r.f("ul-bl-"+W);if(Q){ao(aj,X);L("bl-sum-"+W)}else{ao(X,aj);J("bl-sum-"+W)}}else{R.setContainer(Q)}if(W==="hk"){af=r.f("hk-delay-notice");an=r.f("ul-hk-real");am=r.f("ul-bl-hk-real");D.balance.todayHkProfit=[[0,0,0,0,0,0],[0,0,0,0,0,0]];if(Q){ao(an,am)}else{ao(am,an);an=am;aj=X}if(D.group.current==="0"){ai=true;J(al);L(ab);L("tishi-top");L("tishi-hk");L("#ul"+(Q?"":"-bl")+"-hk thead");ag=this._filterNamesByMarket(ah,"hk",true);if(ah.length>P.hkRealCount){aa=true;ae=this._filterNamesByMarket(ah,"hk",false);this.fillAndSetCron("hk",false,Q,ae,T,S);Q||L("#ul-bl-hk-real tfoot");J(af);J(aj)}else{Q||J("#ul-bl-hk-real tfoot");L(af);L(aj)}}else{L(al);J(ab);L(af);J("#ul"+(Q?"":"-bl")+"-hk thead");ao(aj,an)}}else{L(al);if(W==="cn"||W=="us"){J(ab)}}if(!ag){ag=this._filterNamesByMarket(ah,W,false)}if(ag.length===0){L(W+"-list-ctn");D.news.loaded[W]=true}else{ac=this.sortActiveBtn;if(W=="jj"){ac=ac.jj;if(!ad){m.e(ac,function(aq,ap){aq&&Z.sortSignReset(aq)},true)}ae=D.fund.orders;Y=ae.etf.base;V=ae.cf.base;stdTimeList=[];if(Y.length>0){stdTimeList.push("jj-etf")}if(V.length>0){stdTimeList.push("jj-cf")}ae=D.fund.getQtAryFromSb(Y.concat(V))}else{if(ac[W]&&!ad){this.sortSignReset(ac[W])}}if(D.marketTab.current=="all"){D.timeBar.stdTimeList=[D.timeBar.stdTimeList,W].join(" ")}else{if(W=="jj"){D.timeBar.stdTimeList=stdTimeList.join(" ")}else{D.timeBar.stdTimeList="top"}}this.fillAndSetCron(W,ai,Q,ag,T,S,ak,ae);if(U){this.fold(W,true)}J(W+"-list-ctn");if(!p){QosSS.t[1]=(new Date()).getTime();p=true}}},updateRealHk:function(){var Q=this,R=this.orders.hk.base;L("tishi-top");L("tishi-hk");R=this._filterNamesByMarket(R,"hk",true);R="r_"+R.join(",r_")+","+D.quotes.defaultQuotes.hkreal;R=m.unique(R.split(","));v("quotes-time-"+(D.marketTab.current==="all"?"hk":"top"),"--:--");i.load(R.join(","),function(){Q.update(Q.type==="0","hk",true);Q.cronStartCount.hkreal=y.count})},updateByClk:function(U){var R=this,S,T,Q;if(U in this.orders){S=this.orders[U].base;T=U;Q="quotes-time-"+(D.marketTab.current==="all"?U:"top")}else{if(U in D.fund.orders){S=D.fund.orders[U].base;T="jj";Q="quotes-time-jj-"+U}else{return}}S=this._filterNamesByMarket(S,T,true);S=S.join(",")+","+D.quotes.defaultQuotes[T];S=m.unique(S.split(","));v(Q,"--:--");i.load(S.join(","),function(){R.update(R.type==="0",T,false,true,U)});H.go(48)},changeCtn:function(Y,R,ad,U,Q){var af=D.marketTab.current,T=af==="all",Z=this,ab=r.f("addstock"),ae=r.f("marstat"),aa=r.f("box3-news-ctn"),X=this.cronIds,S=D.news.cronIds,W=D.timeBar,ac=D.group,V=ad;L("tishi-top");L("tishi-hk");W.stdTimeList="";Q=true;if(Y){af="empty";T=false;L(ab);L(ae);L(aa);if(ac.count===1){ac.hide(true)}else{ac.show(true)}}else{J(ab);if(T){L(ae);ac.hide()}else{if(af!=="jj"){W.switchTo(af);J(ae);if(ac.count===1){ac.hide()}else{ac.show()}}else{L(ae);ac.hide()}}}if(af=="jj"){r.f("#addstock td").innerHTML="\u6dfb\u52a0\u57fa\u91d1"}else{r.f("#addstock td").innerHTML="\u6dfb\u52a0\u80a1\u7968"}D.smartbox.move(Y);m.e(m.w("cn hk hkreal us jj"),function(ag){if(X[ag]!==-1){y.unsubscribe(X[ag]);X[ag]=-1}if(S[ag]&&S[ag]!==-1){y.unsubscribe(S[ag]);S[ag]=-1}});v("quotes-time-top","--:--");m.e(m.w("empty cn hk us jj"),function(ag){if((T&&ag!=="empty"&&ag!=="jj")||ag===af){Z.fillByMarket(ag,R,ad,V,Q);if(V){V=false}ag=r.f("#"+ag+"-list-ctn .market-time");if(ag){T?J(ag):L(ag)}}else{L(ag+"-list-ctn")}});if(U){U()}D.notice.loading(false);if(R){D.news.loaded={}}if(D.smartbox.box){D.smartbox.box.hide(true)}},prepareTr:function(){var R=r.f("#ul-cn tbody tr"),S=r.f("#ul-bl-cn tbody tr"),Q;m.e(m.w("hk hk-real us"),function(T){Q=r.f("#ul-"+T+" tbody");Q&&Q.appendChild(R.cloneNode(true));Q=r.f("#ul-bl-"+T+" tbody");Q&&Q.appendChild(S.cloneNode(true))});Q=r.f("#ul-cf-jj tbody");Q&&Q.appendChild(R.cloneNode(true));Q=r.f("#ul-etf-jj tbody");Q&&Q.appendChild(R.cloneNode(true));Q=r.f("#ul-bl-cf-jj tbody");Q&&Q.appendChild(S.cloneNode(true));Q=r.f("#ul-bl-etf-jj tbody");Q&&Q.appendChild(S.cloneNode(true));S=r.f("#ul-bl-of-jj tbody tr");Q=r.f("#ul-bl-lof-jj tbody");Q&&Q.appendChild(S.cloneNode(true));R=r.f("#ul-of-jj tbody tr");Q=r.f("#ul-lof-jj tbody");Q&&Q.appendChild(R.cloneNode(true));R=null;S=null;Q=null},sort:function(X,U){var V=X.id.match(m.getReg("sort-([a-z]+)(-[a-z]+)?(-bl)?-([0-9]+)")),Z,S,T,Q,aa,Y,W,R=false;if(V&&V[1]){T=V[1];Q=this.sortActiveBtn;if(T==="jj"){Q=Q.jj;Y=V[2].substr(1);if(this.lazySaveBegin.jj[Y]!==null){l("stop sorting because unsaved d&d");return}if(Q[Y]&&Q[Y]!==X.id){this.sortSignReset(Q[Y])}Q[Y]=X.id;aa=V[3]||"";Z=["ul"+aa+"-"+Y+"-jj"]}else{if(this.lazySaveBegin[T]!==null){l("stop sorting because unsaved d&d");return}if(Q[T]&&Q[T]!==X.id){this.sortSignReset(Q[T])}Q[T]=X.id;aa=V[2]||"";if(V[1]==="hk"){Z=["ul"+aa+"-hk-real","ul"+aa+"-hk"]}else{Z=["ul"+aa+"-"+T]}}W=V[4];S=function(ab){m.e(Z,function(af){var ac=[],ae,ad;r.remEl(r.$("tr."+x.hide,af));m.e(r.$("tbody tr",af),function(ag,ah){ae=m.stripTags(ag.childNodes[W].innerHTML);ad=ae.substr(ae.length-1);if(ad=="\u4e07"){ae=s.parseFloat(ae)*10000}else{if(ad=="\u4ebf"){ae=s.parseFloat(ae)*100000000}else{ae=s.parseFloat(ae)}}if(isNaN(ae)){ae=1e+100;ae=ab?ae:-ae}ac.push(ae)});__.Table.sort(r.f("tbody",af),W,ab,ac);if(!ab){r.$("col",af)[W].className="sorting"}})};if(U){S(!r.hasClass(X,"desc"))}else{if(!r.hasClass(X,"on")){S(false);r.addClass(X,"on desc")}else{if(r.hasClass(X,"desc")){S(true);r.remClass(X,"desc");r.addClass(X,"asc")}else{R=true;m.e(Z,function(ab){r.$("col",ab)[W].className=""});this.sortByBase(T,aa!=="",Y);if(T==="jj"){Q[Y]=null}else{Q[T]=null}r.remClass(X,"on");r.remClass(X,"asc")}}}if(!R){D.notice.rightTop(true,"\u6392\u5e8f\u4e2d\uff0c\u4e0d\u53ef\u62d6\u62fd\u80a1\u7968",true)}this.syncList2Order(T,aa!=="",false,false,Y)}},sortSignReset:function(R){var Q;Q=r.f(R);if(Q){Q.className=M.clickPre+x.tsort;R=R.split("-");if(R.length==3){if(R[1]=="hk"){r.$("#ul-hk-real col")[R[2]].className=""}r.$("#ul-"+R[1]+" col")[R[2]].className=""}else{if(R.length==4){if(R[2]=="bl"){if(R[1]=="hk"){r.$("#ul-bl-hk-real col")[R[3]].className=""}r.$("#ul-bl-"+R[1]+" col")[R[3]].className=""}else{r.$("#ul-"+R[2]+"-jj col")[R[3]].className=""}}else{if(R.length==5){r.$("#ul-bl-"+R[2]+"-jj col")[R[4]].className=""}}}}},sortByBase:function(W,T,Q){var R,V,S,U=T?M.lineBlPrefix:M.linePrefix;T=T?"-bl":"";if(W==="jj"){S=D.fund.orders[Q].base;R=r.f("#ul"+T+"-"+Q+"-"+W+" tbody")}else{S=this.orders[W].base;R=r.f("#ul"+T+"-"+W+" tbody")}if(W==="hk"&&D.group.current==="0"){R=r.f("#ul"+T+"-hk-real tbody");V=r.f("#ul"+T+"-hk tbody");m.e(S,function(Y,X){Y=r.f(U+Y);if(X<P.hkRealCount){r.insertAfter(Y,R.lastChild)}else{r.insertAfter(Y,V.lastChild)}})}else{m.e(S,function(X){X=r.f(U+X);r.insertAfter(X,R.lastChild)})}},lazyOrderSave:function(V,Q,U){var S=this.lazySaveBegin,R=D.notice,T;R.rightTop(true,"\u5217\u8868\u987a\u5e8f\u4fdd\u5b58\u4e2d...",false);T=V;if(V=="jj"){S=S.jj;T=Q}if(S[T]===null){S[T]=y.count;y.subscribe({judge:function(W){if(S[T]===null||W-S[T]>P.lazyWait){return 2}return 0},onOk:function(){var X=D.list,Z,W,Y;if(V=="jj"){W=D.fund.orders[Q];Z=W.ori;Y=W.base}else{W=X.orders[V];Z=W.ori;Y=W.base}if(S[T]!==null){S[T]=null;if(m.find(Y,function(ab,aa){if(ab!==Z[aa]){X.save(V,Q,U);return true}})===-1){W.base=W.ori;W.ori=null;R.rightTop(false);R.rightTop(true,"\u5217\u8868\u987a\u5e8f\u672a\u6539\u53d8",true);l("order not changed, saving cancelled.")}}else{l("order not saved, new list is drawing, changed abandoned.")}},interval:1,runOnce:true})}else{S[T]=y.count}},syncList2Order:function(T,aa,ac,Y,Z){var W,U,V=[],R,Q,X,S=P.hkRealCount,ab=aa?"-bl":"";if(T=="jj"){Q=D.fund.orders[Z];W=r.$("#ul"+ab+"-"+Z+"-"+T+" tr."+x.item)}else{Q=this.orders[T];W=r.$("#ul"+ab+"-"+T+" tr."+x.item)}if(T==="hk"&&D.group.current==="0"){R=[];m.e(r.$("#ul"+ab+"-hk-real tr."+x.item),function(ae){var ad=ae.id.split("~")[1];V.push(ad)});m.e(W,function(ae){var ad=ae.id.split("~")[1];V.push(ad);R.push(ad)})}else{m.e(W,function(ad){V.push(ad.id.split("~")[1])})}if(ac&&Y){X=this.cronIds.hk;m.find(y.jobs,function(ad){if(ad.id===X){ad.qtName=R.join(",");return true}})}Q.display=V;if(ac){if(!Q.ori){Q.ori=Q.base;Q.moved={}}Q.base=m.clone(V);Q.moved[ac]=true}},note2Html:function(R){var Q={"\u000a":"\n","&#039;":"'","&#126;":"~","&#124;":"|","&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&"};m.e(Q,function(T,S){R=R.replace(m.getReg(S,"g"),T)},true);return R},fold:function(X,S){var V,W=this.type==1?"bl-":"",Q,T=x.hide,R=this.mapMarketBin[X],U=r.f("#"+X+"-list-ctn .du-sd-clk-fold").parentNode;if(S){Q="add";U.className="closed";k.binFold|=R}else{Q="rem";U.className="open";k.binFold&=~R}V=(W?"bl-sum-"+X:"")+" ul-"+W+X;if(X=="hk"){V+="-real";if(this.orders.hk.base.length>P.hkRealCount){V+=" hk-delay-notice ul-"+W+X}}m.e(m.w(V),function(Y){r[Q+"Class"](r.f(Y),T)})},saveFold:function(){var R=this,S=D.io,Q="saveFold";S.load(S.urls[Q](k.binFold),function(T){},Q);D.notice.loading(false)},init:function(){var S,R,Q;D.marketTab.init();D.group.init();this.setListType(k.activeType);S=D.marketTab.current;R=k.list;R=R===""?[]:R.split("|");Q=false;this.prepareTr();this.setOrderList(R);if((S==="all"&&R.length===0)||(S!=="all"&&this.orders[S].base.length===0)){Q=true}this.changeCtn(Q,true,false);D.timeBar.switchTo(S)}},fund:{orders:{},mapSb2Qt:{},rfProcessors:[function(R,S,Q){return D.list.tdProcessors[9]([0,R[1],R[0]],S,Q)},function(Q){return Q[3]===w?"--":(Q[3]-Q[6]).toFixed(4)},function(Q){return Q[6]===w?"--":j.GET_SIGNED_COLOR(Q[6],Q[6])},function(Q){return Q[6]===w?"--":j.GET_PERCENT((Q[6]*100/(Q[3]-Q[6])).toFixed(2),Q[6])},function(Q){return Q[4]===w?"--":Q[4]},function(Q){var R=Q[2];return R.substr(0,4)+"-"+R.substr(4,2)+"-"+R.substr(6,2)}],getQtAryFromSb:function(Q){var S=this.mapSb2Qt,R=[];m.e(Q,function(T){R.push(S[T])});return R},setContainer:function(Q){m.e(this.orders,function(S,R){if(S.base.length>0){J(R+"-jj-ctn");if(Q){J("ul-"+R+"-jj");L("ul-bl-"+R+"-jj")}else{J("ul-bl-"+R+"-jj");L("ul-"+R+"-jj")}}else{L(R+"-jj-ctn")}},true)},updateFundTime:function(R){var S,Q=D.timeBar;S=Q.getMarketTime("jj",false,R);S&&v("quotes-time-jj-"+R,S)},create:function(Q){var R=this;m.e(this.orders,function(T,S){if(T.base.length>0){R.hideRows(S);R._create(S,Q);if(Q){Q=false}}},true)},_create:function(S,R){l("create list for fund: "+S);var U=this.orders[S],Q,T;this.updateFundTime(S);if(R){D.timeBar.cronFns.updateMarketStat()}U=U.display;T=r.f("#ul-"+S+"-jj tbody");if(S=="cf"||S=="etf"){D.list._create("jj",false,R,S)}else{this._createRf(U,T,S)}},_createRf:function(V,T,W){var Q=D.list.data,S,R,U,Y=this.rfProcessors,X=D.list.tdProcessors[12];R=this.getQtAryFromSb(V).join(",");i.fill(R,T.firstChild,[function(ab,aa,Z,ae){var ac,ad=Z.parentNode;S=V[ae];if(ab&&ab.length>1){ac=j.GET_TITLE(ab[0],"0",S.substr(2),false,"_blank");ac=ac.replace('">','" class="'+M.clickPre+'denter d-nc">')}else{ac=S.substr(2)}ad.id=M.linePrefix+S;ad.bgColor="";ad.className=x.item;return ac},function(Z){return Y[0](Z,W,S.substr(0,2))},3,Y[1],Y[2],Y[3],Y[4],Y[5],"&nbsp;",function(){var Z;Z=Q[S];Z=Z[5]=="1"?x.alarmActive:x.alarmIco;Z='<a href="javascript:void(0);" class="'+Z+" "+M.clickPre+x.alEdit+'"></a>';return Z},function(ab){var aa="",Z=Q[S];if(Z&&((Z[0]-0!==0)||(Z[1]-0!==0))){aa="_ed"}if(Z[2]!="idx"&&ab[1]!==w){aa='<a href="javascript:void(0);" class="ico7'+aa+" "+M.clickPre+x.blEdit+'"></a>'}else{aa="&nbsp"}return aa},function(aa){var Z;if(Q[S]&&Q[S][3]!==""){Z=x.noteIcoActive}else{Z=x.noteIco}return aa[1]===w?"&nbsp;":'<a href="javascript:void(0);" class="'+Z+" "+M.moPre+x.note+" "+M.clickPre+x.noteEdit+'"></a>'},X,function(aa,Z,ad,ac){var ab=ad.parentNode;ab.id=M.linePrefix+S;ab.bgColor="";ab.className=x.item;return" "}," "],{showError:true})},createBl:function(Q){var R=this;m.e(this.orders,function(T,S){if(T.base.length>0){R.hideRows(S);S==="cf"||S==="etf"?D.balance._createBl("jj",false,Q,S):R._createBl(S,Q);if(Q){Q=false}}},true)},_createBl:function(S,ae){l("create balance list for market: jj "+S);var Q,Y,ah=D.list,aa,R=this.rfProcessors,ac=ah.data,V,aj,Z,ag,T,ai,X=0,W=0,ab=0,ad,af,U,ak;af=ah.tdProcessors[12];ak=function(){var al;al=ac[ai];al=al[5]=="1"?x.alarmActive:x.alarmIco;al='<a href="javascript:void(0);" class="'+al+" "+M.clickPre+x.alEdit+'"></a>';return al};U=function(am){var al="";if(T){al="_ed"}return am[3]===w?"&nbsp;":'<a href="javascript:void(0);" class="ico7'+al+" "+M.clickPre+x.blEdit+'"></a>'};ad=function(am){var al;if(ac[ai]&&ac[ai][3]!==""){al=x.noteIcoActive}else{al=x.noteIco}return am[3]===w?"&nbsp;":'<a href="javascript:void(0);" class="'+al+" "+M.moPre+x.note+" "+M.clickPre+x.noteEdit+'"></a>'};if(ae){D.timeBar.cronFns.updateMarketStat()}this.updateFundTime(S);aa=D.fund.orders[S];Q=r.f("#ul-bl-"+S+"-jj tbody");Y=aa.display;i.fill(this.getQtAryFromSb(Y).join(","),Q.firstChild,[function(an,am,al,ar){var aq,ao,ap=al.parentNode;ai=Y[ar];aq=ac[ai];if(an&&an.length>1){ao=j.GET_TITLE(an[0],"0",ai.substr(2),false,"_blank");ao=ao.replace('">','" class="'+M.clickPre+'denter d-nc">')}else{ao=ai.substr(2)}ap.id=M.lineBlPrefix+ai;ap.bgColor="";ap.className=x.item;ag=aq[4]-0;Z=aq[1];V=ag/Z;X+=(Z-0);T=(ag!==0)||(Z-0!==0);if(an[3]===w){T=false}aj=an[3];if(V==-1){V=0}ab+=aj*Z;W+=ag;return ao},function(al){return R[0](al,S,ai.substr(0,2))},3,R[3],R[5],function(){return T?h(ag,0,0,false):"--"},function(al){return al[3]===w?"--":h(Z-0,0,2,false)},function(){return T?h(V-0,0,4,false):"--"},function(){var al=(aj-V)*Z;return T?h(al,al,0,true):"--"},function(){var al=(aj-V)/V;return T?j.GET_PERCENT((al*100).toFixed(2),al):"--"},"&nbsp;",ak,U,ad,af],{showError:true});this._updateBlSum(X,W,ab,S)},_updateBlSum:function(T,W,U,R){var S=r.$("#ul-bl-"+R+"-jj tfoot td"),Q,V;V=U-W;Q=[h(W,0,0,false),h(T,0,0,2),h(V,V,0,true),j.GET_PERCENT((V*100/W).toFixed(2),V)];m.e(S,function(Y,X){v(Y,Q[X])})},update:function(S,Q){var R;if(Q){this._update(Q)}else{R=this;m.e(this.orders,function(U,T){if(U.base.length>0){if(S||T=="cf"||T=="etf"){R._update(T)}}},true)}},_update:function(R){l("update list for jj: "+R);var T=this.orders[R],Q,S=this;this.updateFundTime(R);T=T.display;m.e(T,function(U){S._updateOne(U,R)})},_updateOne:function(R,Z){var Y=r.f(M.linePrefix+R),aa=this.mapSb2Qt[R],T=s["v_"+aa],U,W=D.list.tdProcessors,V,S="",Q,X;T=T&&T.split("~");if(T&&T.length&&Y){U=r.$("td",Y);m.e(U,function(ad,ab){var ac;if(ab===0){ac=T[3];V=parseFloat(ad.innerHTML);if(isNaN(V)){V=ad.firstChild;V=V.innerHTML&&parseFloat(V.innerHTML)}if(m.isNumber(V)){if(ac>V){S="\u2191";Q="background:#FFE1E1;width:74px;padding-right:4px;"}else{if(ac<V){S="\u2193";Q="background:#D7F2DC;width:74px;padding-right:4px;"}else{Q=""}}ad.style.cssText=Q;v(ad,j.GET_COLOR(T[3],T[32])+S);return}}v(ad,i.process(W[ab],T))})}else{l("no data for: "+R)}},updateBl:function(S,Q){var R;if(Q){this._updateBl(Q)}else{R=this;m.e(this.orders,function(U,T){if(U.base.length>0){if(S||T=="cf"||T=="etf"){R._updateBl(T)}}},true)}},_updateBl:function(R){l("update balance list for jj"+R);var U=this.orders[R],Q,T=this,V=R=="of"||R=="lof",S={amoutSum:0,costSum:0,valueSum:0,allSoldSum:0,buySpendSum:0};this.updateFundTime(R);U=U.display;m.e(U,function(W){T._updateBlOne(W,R,S)});V?this._updateBlSum(S.amoutSum,S.costSum,S.valueSum,R):D.balance._updateBlSum("jj",S.amoutSum,S.costSum,S.valueSum,S.allSoldSum,0,S.buySpendSum,R)},_updateBlOne:function(Q,S,T){var ae=D.list,R=r.f(M.lineBlPrefix+Q),W=this.mapSb2Qt[Q],aj=s["v_"+W],aa,ai,Z="",ab,ag,Y=this.rfProcessors,V,af,X,U,ad,ac,ah=S=="of"||S=="lof";aj=aj&&aj.split("~");ag=[function(am,ak,an){var al;price=am[3];ai=parseFloat(an.innerHTML);if(isNaN(ai)){ai=an.firstChild;ai=ai.innerHTML&&parseFloat(ai.innerHTML)}if(m.isNumber(ai)){if(price>ai){Z="\u2191";ab="background:#FFE1E1"}else{if(price<ai){Z="\u2193";ab="background:#D7F2DC"}else{ab=""}}an.style.cssText=ab;al=j.GET_COLOR(am[3],am[6])+Z}else{al=m.isNumber(price)?j.GET_COLOR(price,am[6]):"--"}return al},Y[3],Y[5],function(ak){var al=ae.data[Q];ac=al[4]-0;X=al[1];V=ac/X;af=ak[3];T.amoutSum+=(X-0);T.costSum+=ac;T.valueSum+=X*af;U=(ac!==0)||(X-0!==0);return U?h(ac,0,0,false):"--"},function(){return h(X-0,0,2,false)},function(){var ak="--";if(U){ak=V;ak=h(ak-0,0,4,false)}return ak},function(){return U?h(((af-V)*X),(af-V),0,true):"--"},function(){return U?j.GET_PERCENT(((af-V)/V*100).toFixed(2)):"--"}];if(!ah){ag[1]=j.L_PERCENT;ag[2]=function(ak){var al=ae.data[Q];V=al[0]-0;X=al[1];ac=al[4];af=ak[3]-0;T.amoutSum+=(X-0);T.buySpendSum+=(ac-0);U=(V-0!==0)||(X-0!==0);if(X==="0"&&V!=0){ad=V-0;V="--";T.allSoldSum+=ad}else{ad=(af-V)*X;T.costSum+=V*X;T.valueSum+=X*af}return U&&V!="--"?h(V,0,3,false):"--"};ag[3]=function(){return h(X-0,0,0,false)};ag[4]=function(){return U&&V!="--"?h(X*af,0,0,false):"--"};ag[5]=function(){return U&&V!="--"?h((af-V),(af-V),3,true):"--"};ag[6]=function(){return U?h(ad,ad,0,true):"--"};ag[7]=function(){return U?j.GET_PERCENT((ad/ac*100).toFixed(2),ad):"--"}}if(aj&&aj.length&&R){aa=r.$("td",R);m.e(aa,function(al,ak){v(al,ag[ak](aj,-1,al))})}else{l("no data for: "+Q)}},hideRows:function(R){var Q,T=D.list.type==="0",S=this.orders[R].base.length;Q=r.$("#ul-"+(T?"":"bl-")+R+"-jj tbody tr");m.e(Q,function(V,U){V.id="";if(U>=S){V.className=x.hide}})}},balance:{todayHkProfit:[[0,0,0,0,0,0],[0,0,0,0,0,0]],cnBalance:[],defaultRate:"0",defaultRowIsRf:false,defaultRowIsUs:false,yuanPerUnit:{us:6.826,hk:0.87898},save:function(V,Y,S,U){var W=this,X=D.io,Z="saveBl",T,R=D.list.type,Q;T=D.list.usQtSaMap[V]||V;Q=R==="0"?M.linePrefix:M.lineBlPrefix;m.e(Y,function(ab,aa){if(ab.length==6){ab.pop()}Y[aa]=ab.join("~")});X.load(X.urls[Z](T),function(af){var ae=af.data.trade||"",ad=D.list.data,ab,aa=x.balanceIco,ac=x.balanceActive;ae=ae.split("~");ae.shift();if(ad[V][0]==0&&ad[V][1]==0){if(Y.length>0){ab=r.f("."+aa,Q+V);if(ab){r.remClass(ab,aa);r.addClass(ab,ac)}}}else{if(Y.length==0){ab=r.f("."+ac,Q+V);if(ab){r.remClass(ab,ac);r.addClass(ab,aa)}}}ad[V]=ae;if(R==="1"){D.list.update(false,S,U,true)}D.notice.rightTop(true,"\u76c8\u4e8f\u4ea4\u6613\u4fe1\u606f\u5df2\u4fdd\u5b58",true)},Z,{sPost:"trade="+Y.join("|")})},saveAl:function(U,Z,W,S){var V=this,X=D.io,Y="saveAl",T,R=D.list.type,Q;T=D.list.usQtSaMap[U]||U;Q=R==="0"?M.linePrefix:M.lineBlPrefix;X.load(X.urls[Y](T,Z,S),function(af){var ae=af.data.alert||"",ad=D.list.data,ab,aa=x.alarmIco,ac=x.alarmActive;ae=ae.split("~");if(ad[U][5]==="0"&&ae[6]==="1"){ab=r.f("."+aa,Q+U);if(ab){r.remClass(ab,aa);r.addClass(ab,ac)}}else{if(ad[U][5]==="1"&&ae[6]==="0"){ab=r.f("."+ac,Q+U);if(ab){r.remClass(ab,ac);r.addClass(ab,aa)}}}if(W){D.notice.success("\u60a8\u5df2\u6210\u529f\u9000\u8ba2\u81ea\u9009\u80a1\u63d0\u9192")}else{D.notice.rightTop(true,"\u81ea\u9009\u80a1\u63d0\u9192\u4fe1\u606f\u5df2\u4fdd\u5b58",true)}ae.shift();ad[U]=ae})},_createBl:function(aa,ai,al,T){l("create balance list for market: "+aa+" "+ai+" "+T);var R,ad,ar=D.list,ag,S=ar.tdProcessors,Y,ah=ar.data,Z,au,ae,U,at,ap,ao,an=0,ac=0,ab=0,af=0,ak=0,X=0,Q,aj,W,aw=1,av=this.yuanPerUnit,V,aq,am=D.group.current==="0";W=function(){var ay="",ax=ah[at];if(U){ay="_ed"}if(ax[2]!="idx"&&!V){ay='<a href="javascript:void(0);" class="ico7'+ay+" "+M.clickPre+x.blEdit+'"></a>'}else{ay="&nbsp;"}return ay};aj=function(ay){var ax;if(ah[at]&&ah[at][3]!==""){ax=x.noteIcoActive}else{ax=x.noteIco}return V?"&nbsp;":'<a href="javascript:void(0);" class="'+ax+" "+M.moPre+x.note+" "+M.clickPre+x.noteEdit+'"></a>'};if(al){D.timeBar.cronFns.updateMarketStat()}D.timeBar.updateQuoteTime(aa,ai,T);if(aa!=="jj"){ag=ar.orders[aa];R=r.f("#ul-bl-"+aa+(ai?"-real":"")+" tbody")}else{ag=D.fund.orders[T];R=r.f("#ul-bl-"+T+"-jj tbody")}ad=ag.display;ad=ar._filterNamesByMarket(ad,aa,ai);if(ai){Y=function(ay,ax,az){if(az){aw=1;aq=""}return S[8](ay,ax,az)};ag="r_"+ad.join(",r_")}else{Y=function(ay,ax,az){if(az){if(ay[0]==="1"&&m.startWith(ay[2],"90")){aw=av.us;aq="us"}else{if(ay[0]==="51"&&m.startWith(ay[2],"20")){aw=av.hk;aq="hk"}else{aq="";aw=1}}}return S[0](ay,ax,az)};ag=ad.join(",")}i.fill(ag,R.firstChild,[function(az,ay,ax,aD){var aB,aC=ax.parentNode,aA;if(az.length==1&&az[0]===""){V=true;at=ad[aD];aB=at.substr(2)}else{V=false;if(!az||az.length<30){at=ad[aD];aB=at.substr(2)}else{at=i.MAP_STOCKTYPE[az[0]]+K(az[2]);if(D.marketTab.current=="jj"){aA="0"}else{aA=az[0]}aB=j.GET_TITLE(az[2],aA,K(az[2]),false,"_blank");aB=aB.replace('">','" class="'+M.clickPre+'denter d-nc">')}}aC.id=M.lineBlPrefix+at;aC.bgColor="";aC.className=x.item;return aB},function(ay){var ax=aa=="jj"?T:aa;return S[9](ay,ax,at.substr(0,2))},Y,S[1],function(ay,ax,aA){var az=ah[ad[arguments[3]]];Q=az[5]==="1";Z=az[0];ae=az[1];ao=az[4];X+=ao-0;ac+=(ae-0);U=(Z-0!==0)||(ae-0!==0);au=ay[40]?ay[4]:(ai?ay[35]:ay[3]);if(ae==="0"&&Z!=0){ap=Z-0;Z="--";an+=ap*aw}else{ap=(au-Z)*ae;ab+=Z*ae*aw;if(ay[4]!==w){ak+=(au-ay[4])*(ae-0)*aw}}if(Z==-1){Z=0}aA.className=aq;return U&&Z!="--"?h(Z-0,0,2,false):"--"},function(){return V?"--":h(ae-0,0,0,false)},function(ay,ax,aA){var az="--";if(U&&Z!="--"){az=au*ae;af+=az*aw;az=h(az,0,0,false);aA.className=aq}return az},function(ay,ax,az){az.className=aq;return U&&Z!="--"?h((au-Z),(au-Z),2,true):"--"},function(ay,ax,az){az.className=aq;return U?h(ap,ap,0,true):"--"},function(){return U?j.GET_PERCENT((ap/ao*100).toFixed(2),ap):"--"}," ",function(){var ax="&nbsp;";if(am&&(aa=="cn"||aa=="hk"||aa=="jj")){ax=Q?x.alarmActive:x.alarmIco;ax='<a href="javascript:void(0);" class="'+ax+" "+M.clickPre+x.alEdit+'"></a>'}return ax},W,aj,S[12]],{showError:true});if(aa=="hk"){this.todayHkProfit[ai?"1":"0"]=[ac,ab,af,an,ak,X]}this._updateBlSum(aa,ac,ab,af,an,ak,X,T)},_updateBl:function(X,S){l("update balance list for market: "+X+" "+S);var V=D.list,R=D.marketTab.current==="all",W=V.orders[X],Q,U=this,T={amoutSum:0,costSum:0,valueSum:0,allSoldSum:0,buySpendSum:0,todayChange:0};D.timeBar.updateQuoteTime(X,S);W=W.display;W=V._filterNamesByMarket(W,X,S);m.e(W,function(Y){U._updateBlOne(Y,S,T)});if(X=="hk"){this.todayHkProfit[S?"1":"0"]=[T.amoutSum,T.costSum,T.valueSum,T.allSoldSum,T.todayChange,T.buySpendSum]}this._updateBlSum(X,T.amoutSum,T.costSum,T.valueSum,T.allSoldSum,T.todayChange,T.buySpendSum)},_updateBlOne:function(Q,X,S){var ad=D.list,R=r.f(M.lineBlPrefix+Q),aj=s["v_"+(X?"r_":"")+Q],Z,ah,Y="",aa,U,af,V,ae,W,T,ai=1,ac,ag=this.yuanPerUnit,ab;aj=aj&&aj.split("~");af=[function(am,ak,an){var al;if(X){price=am[35];U=ad.tdProcessors[8]}else{price=am[3];U=function(ap,ao,aq){if(aq){aq.style.cssText="";if(ap[0]==="1"&&m.startWith(ap[2],"90")){ai=ag.us;aq.className="us"}else{if(ap[0]==="51"&&m.startWith(ap[2],"20")){ai=ag.hk;aq.className="hk"}else{ai=1}}}return j.GET_COLOR(ap[3],ap[32])}}ah=parseFloat(an.innerHTML);if(isNaN(ah)){ah=an.firstChild;ah=ah.innerHTML&&parseFloat(ah.innerHTML)}if(m.isNumber(ah)){if(price>ah){Y="\u2191";aa="background:#FFE1E1"}else{if(price<ah){Y="\u2193";aa="background:#D7F2DC"}else{aa=""}}an.style.cssText=aa;al=i.process(U,am)+Y}else{al=i.process(U,am)}return al},ad.tdProcessors[1],function(ak){var al=ad.data[Q];V=al[0];W=al[1];ab=al[4];S.amoutSum+=(W-0);S.buySpendSum+=(ab-0);T=(V-0!==0)||(W-0!==0);ae=ak[40]?ak[4]:(X?ak[35]:ak[3]);if(W==="0"&&V!=0){ac=V-0;V="--";S.allSoldSum+=ac*ai}else{ac=(ae-V)*W;S.costSum+=V*W*ai;S.todayChange+=(ae-ak[4])*(W-0)*ai}return T&&V!="--"?h(V-0,0,2,false):"--"},function(){return h(W-0,0,0,false)},function(al,ak,an){var am="--";if(T&&V!="--"){am=ae*W;S.valueSum+=am*ai;am=h(am,0,0,false)}return am},function(){return T&&V!="--"?h((ae-V),(ae-V),2,true):"--"},function(){return T?h(ac,ac,0,true):"--"},function(){return T?j.GET_PERCENT((ac/ab*100).toFixed(2),ac):"--"}];if(aj&&aj.length>10&&R){Z=r.$("td",R);m.e(Z,function(am,ak){var al=af[ak](aj,-1,am);if(al!==w){v(am,al)}})}else{l("no data for: "+Q)}},_updateBlSum:function(S,V,R,Y,T,ac,ab,Z){var X,Q,U,aa,W;W=r.f("#ul-bl-"+S+" tfoot");if(S=="cn"){aa=r.f("select",W);this.cnBalance=[V,R,Y,T,ac,ab];if(aa.selectedIndex!==0){if(aa.selectedIndex==1){aa=this.yuanPerUnit.hk}else{if(aa.selectedIndex==2){aa=this.yuanPerUnit.us}}R/=aa;Y/=aa;T/=aa;ac/=aa;ab/=aa}}else{if(S=="hk"){ac=this.todayHkProfit;V=ac[0][0]+ac[1][0];R=ac[0][1]+ac[1][1];Y=ac[0][2]+ac[1][2];T=ac[0][3]+ac[1][3];ab=ac[0][5]+ac[1][5];ac=ac[0][4]+ac[1][4];if(D.group.current=="0"){if(D.list.orders.hk.base.length<=P.hkRealCount){W=r.f("#ul-bl-hk-real tfoot")}}}}X=Y-R+T;Q=[h(V,0,0,false),h(Y,0,0,false),h(X,X,0,true),j.GET_PERCENT((X*100/ab).toFixed(2),X),h(ac,ac,2,true)];if(S==="jj"){U=r.$("#ul-bl-"+Z+"-jj tfoot td")}else{U=r.$("td",W);v("#bl-sum-"+S+" div span",Q[4])}m.e(U,function(ae,ad){v(ae,Q[ad])})},loadBlAndPop:function(V,Q){var U=D.io,R="loadBl",T=V,S=D.calendar;V=D.list.usQtSaMap[V]||V;if(V){U.load(U.urls[R](V),function(Y){var W=Y.data.trade||"",X;W=W.split("|");X=function(){D.notice.dialogs.bledit(T,W,Q)};if(S.loaded){X()}else{S.load(X)}},R);H.go(10)}},loadAlAndPop:function(V,U,T){var S=D.io,Q="loadAl",R=V;if(!T&&(D.group.current!=="0"||m.startWith(V,"us"))){return}if(V){S.load(S.urls[Q](V,U),function(aa){var Y=aa.data.alert||"",Z,W,X;W=Y==="~~~~~~~~";Y=Y.split("~");X=function(){D.notice.dialogs.aledit(R,Y,W,T?"qq":undefined)};if(R in D.list.data){X()}else{D.list.loadList(U,0,false,X)}},Q);H.go(11)}},getSumFromTrade:function(S,Q,Y){var V=0,aa=0,ab=0,R=0,Z=[],W=this,X=0,T,U;m.e(S,function(ad,ac){ad=ad.split("~");if(ad.length==5&&ac<10){if(Y){U=ad[3]/ad[2]}else{U=ad[3]}if(ad[0]=="sell"){V-=ad[2];R+=Q?U*ad[2]-ad[4]:U*ad[2]*(1-ad[4]/1000)}else{V+=ad[2]-0;X+=ad[2]-0;ab+=Q?U*ad[2]+(ad[4]-0):U*ad[2]*(1+(Y?0:ad[4]/1000))}Z.push(W.getOneBlDetail([ac+1,ad[0]!="sell",ad[1],ad[2],U,ad[4],Y]))}});return[V,R,ab,X,Z]},getOneBlDetail:function(T){var U,Q,S,V=function(X){return X>=10?X:"0"+X},R,W;R=D.calendar.idCount++;if(T[2]===null){U=new Date();T[2]=[U.getFullYear(),V(U.getMonth()+1),V(U.getDate())].join("-")}if(T[6]){W=T[3]*T[4];W=W>0?W.toFixed(2):"";Q={child:{child:[{tag:"a",href:"javascript:void(0)",cls:"ico8 "+M.clickPre+x.delBl},{tag:"input",value:W,cls:M.keyUpPre+x.rfCost,maxLength:9,css:"margin-left:31px"},{tag:"input",value:T[3],cls:M.keyUpPre+x.rfAmount,maxLength:9,css:"margin-left:40px"},{tag:"span",text:(T[4]-0).toFixed(4),css:"margin-left:40px;float:left;width:92px;text-align:center;",cls:"fntTahoma"}]}}}else{Q={child:{child:[{tag:"a",href:"javascript:void(0)",cls:"ico8 "+M.clickPre+x.delBl},{tag:"span",cls:"nan",text:T[0]+"."},{child:{tag:"select",child:[{text:"\u4e70\u5165",selected:T[1]?"selected":false},{text:"\u5356\u51fa",selected:T[1]?false:"selected"}]}},{tag:"input",cls:"first",value:T[2],id:M.calIptPre+R,readOnly:"readonly"},{tag:"span",cls:"cal",id:M.calTriPre+R},{tag:"input",value:T[3],maxLength:9,cls:M.keyUpPre+x.blAmout},{tag:"input",value:T[4],maxLength:9,cls:M.keyUpPre+x.blPrice},{tag:"input",value:T[5],maxLength:9,cls:M.keyUpPre+x.blTax}]}}}return Q},addBlRow:function(Q){var S,R;S=Q.childNodes.length;if(S>=10){D.notice.lightErr("\u5bf9\u4e0d\u8d77\uff0c\u60a8\u6700\u591a\u53ea\u80fd\u8bb0\u5f5510\u6761\u4ea4\u6613")}else{R=r.addEl(this.getOneBlDetail([Q.childNodes.length+1,true,null,"","",this.defaultRate,this.defaultRowIsRf]),Q);D.calendar.attach(R);S++;S=S>=3?84:(S==1?40:28*S);Q.style.height=S+"px";Q.scrollTop=Q.scrollHeight*10}},delBlRow:function(Q){var R=Q.parentNode;r.remEl(Q);if(R.childNodes.length==0){this.addBlRow(R)}},isBlDataLegal:function(S,Y,X){var T,U,aa=true,R=m.getReg("^-?[0-9.e]+$"),Z,W=0,Y,Q,V;Q=this.defaultRowIsUs;if(Y){Z=["\u6301\u6709\u4efd\u989d\u5fc5\u987b\u662f\u5c0f\u4e8e1\u4ebf\u7684\u6b63\u6570","\u60a8\u7684\u8f93\u5165\u4e0d\u5408\u7406\uff0c\u8bf7\u6ee1\u8db3\u6295\u5165\u91d1\u989d/\u6301\u6709\u4efd\u989d\u5c0f\u4e8e10\u4e07","\u60a8\u8fd8\u672a\u8f93\u5165\u6301\u6709\u4efd\u989d","\u60a8\u8fd8\u672a\u8f93\u5165\u6295\u5165\u91d1\u989d","\u6295\u5165\u91d1\u989d\u5fc5\u987b\u662f\u5c0f\u4e8e1\u767e\u4e07\u7684\u6b63\u6570","\u8bf7\u60a8\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u5b57"]}else{Z=["\u80a1\u6570\u5fc5\u987b\u662f\u5c0f\u4e8e1\u4ebf\u7684\u6b63\u6574\u6570","\u4ef7\u683c\u5fc5\u987b\u662f\u5c0f\u4e8e10\u4e07\u7684\u6b63\u6570","\u8bf7\u60a8\u8f93\u5165\u80a1\u6570","\u8bf7\u60a8\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u5b57","\u60a8\u8fd8\u672a\u8f93\u5165\u80a1\u6570","\u60a8\u8fd8\u672a\u8f93\u5165\u4ef7\u683c"]}m.any(S,function(ab){if(ab.length==5){if(ab[0]=="buy"){W+=(ab[2]-0)}else{W-=ab[2]}if(ab[4]===""){ab[4]="0"}V=Y?ab[3]/ab[2]:ab[3]-0;if(Y){if(!R.test(ab[2])||ab[2]<0||ab[2]>100000000){U=Z[0]}else{if(ab[2]===""){U=Z[2]}else{if(ab[3]===""){U=Z[3]}else{if(ab[2]-0===0||ab[3]-0===0){U=Z[5]}else{if(!R.test(ab[3])||ab[3]<=0||ab[3]>1000000){U=ab[3]-0===0?Z[5]:Z[4]}}}}}}else{if(!R.test(ab[2])||ab[2]<=0||ab[2]>100000000||!m.isInt(ab[2]-0)){U=ab[2]===""?Z[4]:(ab[2]-0===0?Z[3]:Z[0])}else{if(!m.isNumber(ab[4]-0)||ab[4]<0||!R.test(ab[4])||(Q?ab[4]>100000000:ab[4]>100)){U=Q?"\u4ea4\u6613\u8d39\u7528\u5fc5\u987b\u662f0\u6216\u5c0f\u4e8e1\u4ebf\u7684\u6b63\u6570":"\u8d39\u7387\u5fc5\u987b\u662f0\u6216100\u4ee5\u5185\u7684\u6b63\u6570"}}}if(!X&&(!m.isNumber(V)||V<=0||!R.test(V)||V>100000)){if(Y&&ab[2]-0===0){U=Z[5]}else{U=ab[3]===""?Z[5]:(V===0?Z[3]:Z[1])}}}if(U){return true}});if(!U&&W<0){U="\u5356\u51fa\u7684\u80a1\u6570\u4e4b\u548c\u4e0d\u80fd\u5927\u4e8e\u4e70\u5165\u7684\u80a1\u6570\u4e4b\u548c"}T=r.f(M.blErr);if(U){v(T,'<span class="ico16"></span>'+U);T.style.visibility="visible";aa=false}else{T.style.visibility="hidden"}return aa},isAlDataLegal:function(V,R){var W,U,Q=true,S,T;if(!R){S=m.getReg("^[0-9.]+$");T=["\u4ef7\u683c\u5fc5\u987b\u662f\u5c0f\u4e8e10\u4e07\u7684\u6b63\u6570","\u6da8\u8dcc\u5e45\u8bf7\u8f93\u5165\u5c0f\u4e8e1\u4e07\u7684\u6b63\u6570","\u60a8\u7684\u4e0a\u6da8\u76ee\u6807\u4ef7\u5fc5\u987b\u9ad8\u4e8e\u60a8\u7684\u4e0b\u8dcc\u76ee\u6807\u4ef7"];if(V[0]==="1"&&V[1]!=="1"&&(!S.test(V[1])||V[1]<0.01||V[1]>10000)){U=T[1]}else{if(V[2]==="1"&&V[3]!=="1"&&(!S.test(V[3])||V[3]<0.01||V[3]>100000)){U=T[0]}else{if(V[4]==="1"&&V[5]!=="1"&&(!S.test(V[5])||V[5]<0.01||V[5]>100000)){U=T[0]}else{if(V[2]==="1"&&V[4]==="1"&&V[3]-0<=V[5]-0){U=T[2]}}}}W=r.f(M.blErr);if(U){v(W,'<span class="ico16"></span>'+U);W.style.visibility="visible";Q=false}else{W.style.visibility="hidden"}}else{Q=true}return Q},syncAlData:function(U){var R=r.$("#"+M.alIptCtn+" input"),T,Q,S="0";T=[S,S,S,S,S,S,S,S];T[U]=R[U].value;T[U-1]="1";if(T[U]===""||D.balance.isAlDataLegal(T)){if(U==3){Q=R[5].value/(100-r.f("du-sd-al-dt").innerHTML)*100;Q=(R[3].value-Q)/Q*100;r.f("du-sd-al-ut").innerHTML=m.isNumber(Q)?h(Q,0,Q>1000?0:2):"--";R[2].checked="checked"}else{if(U==5){Q=R[3].value/(r.f("du-sd-al-ut").innerHTML-0+100)*100;Q=(Q-R[5].value)/Q*100;r.f("du-sd-al-dt").innerHTML=m.isNumber(Q)?h(Q,0,Q>1000?0:2):"--";R[4].checked="checked"}else{if(U==1){R[0].checked="checked"}}}}}},timeBar:{baseTime:null,offset:0,needUpdateStdTime:false,binaryMap:{cn:1,hk:2,jj:4,us:8},updatingBin:0,openningBin:0,stdTimeList:"",statusTxt:{cn:"",hk:"",jj:"",us:""},cronFns:{updateStdTime:function(){var Q=D.timeBar,R="v_stdunixtime";if(s[R]){Q.baseTime=s[R]-0;Q.offset=0;Q.needUpdateStdTime=false;s[R]=null}},updateMarketStat:function(){var R=D.timeBar,U="v_marketStat",T=s[U],Q,S=true;if(T){T=T.split("|");Q=R.getUnixTimeFromStr(T[0]);if(Math.abs(R.baseTime+R.offset-Q)<120){R.setOpenBinByAry(T);S=false}s[U]=null}R.updateBinaries(S)},updateTimebar:function(){var T=D.timeBar,Q=D.marketTab.current,U=function(W){return W>=10?W:"0"+W};if(T.baseTime){T.offset++;var V="",S=new Date((T.baseTime+T.offset)*1000),R;R=S.getSeconds();V=[S.getMonth()+1,"\u6708",S.getDate(),"\u65e5",U(S.getHours()),":",U(S.getMinutes()),":",U(R)].join("");m.e(m.w(T.stdTimeList),function(W){W&&v("stdtime-"+W,V)})}}},switchTo:function(Q){if(Q!=="all"&&Q!=="jj"){v("trad-top",r.f("trad-"+Q).innerHTML)}},getQuoteTime:function(U,T,R){var Q,S=function(){F("data is wrong for market: "+T+", ftype:"+R+", data:"+U)};if(U&&U.substr){switch(T){case"cn":U=U.substr(8);if(U.length!==6){S()}Q=U.substr(0,2)+":"+U.substr(2,2)+":"+U.substr(4,2);break;case"hk":U=U.substr(11);if(U.length!==8&&U.length!==5){S()}Q=U.substr(0,2)+":"+U.substr(3,2);break;case"us":Q=U.substr(11);break;case"jj":if(R=="cf"||R=="etf"){U=U.substr(8);if(U.length!==6){S()}Q=U.substr(0,2)+":"+U.substr(2,2)+":"+U.substr(4,2)}else{U=new Date((this.baseTime+this.offset)*1000);if(U.getHours()<16){U=new Date(U.valueOf()-3600*24*1000)}Q=(U.getMonth()+1)+"\u6708"+U.getDate()+"\u65e5"}}}return Q||"--:--"},getUnixTimeFromStr:function(S){var Q=S.split(m.getReg("[-: ]")),R=new Date();R.setYear(Q[0]);R.setMonth(Q[1]-1);R.setDate(Q[2]);R.setHours(Q[3]);R.setMinutes(Q[4]);R.setSeconds(Q[5]);R=Math.floor(R.getTime()/1000);return R},setOpenBinByAry:function(U){var S,Q=this.statusTxt,R=0,T=this.binaryMap;if(U&&U[4]){S=U[1].split("_");Q.hk=m.truncate(S[2],6,"..");if(S[1]==="open"){R|=T.hk}S=U[2].split("_");Q.cn=m.truncate(S[2],6,"..");if(S[1]==="open"){R|=T.cn}S=U[4].split("_");Q.us=m.truncate(S[2],6,"..");if(S[1]==="open"){R|=T.us}this.openningBin=R}},setTradLogo:function(W,S,Q,R){var T=D.marketTab.current,U,V;if(W==="jj"){U=r.f("trad-jj-"+R+"-trigger");V=r.f("status-jj-"+R)}else{if(T==="all"||T===W){if(T!=="all"){W="top"}U=r.f("trad-"+W+"-trigger");V=r.f("status-"+W)}}if(U&&V){U.innerHTML="";r.addText(U,Q);V.src=S?"http://mat1.gtimg.com/finance/stock/pstock/icon.gif":"http://mat1.gtimg.com/finance/stock/pstock/icon2.png"}},setTradLogos:function(){var T=this,Q=this.statusTxt,S=this.openningBin,V=this.binaryMap,U,R;if(D.marketTab.current!=="jj"){m.e(m.w("cn hk us"),function(W){U=false,R=Q[W];if((S&V[W])==V[W]){U=true;R=R||"\u4ea4\u6613\u4e2d"}else{R=R||"\u5df2\u4f11\u5e02"}T.setTradLogo(W,U,R)})}else{m.e(m.w("cf etf"),function(W){U=false,R=Q.cn;if((S&V.cn)==V.cn){U=true;R=R||"\u4ea4\u6613\u4e2d"}else{R=R||"\u5df2\u4f11\u5e02"}T.setTradLogo("jj",U,R,W)})}},updateBinaries:function(W){var T=new Date((this.baseTime+this.offset)*1000),V=T.getHours()*100+T.getMinutes(),U=T.getDay(),S=this.binaryMap,Q=0,R;if(U>=1&&U<=5){if(V>900&&V<1530){Q|=S.cn;Q|=S.jj}if(V>900&&V<1630){Q|=S.hk}}if((U>=1&&U<=5&&V>2100)||(U>=2&&U<=6&&V<430)){Q|=S.us}l("new updating binary: "+Q);this.updatingBin=Q;if(W){Q=0;if(U>=1&&U<=5){if((V>=930&&V<=1130)||(V>=1330&&V<=1500)){Q|=S.cn}if((V>=930&&V<=1200)||(V>=1330&&V<=1600)){Q|=S.hk}}Q|=this.updatingBin&S.jj;if((U>=1&&U<=5&&V>=2130)||(U>=2&&U<=6&&V<400)){Q|=S.us}this.statusTxt={cn:"",hk:"",jj:"",us:""};this.openningBin=Q}l("new openning binary: "+Q);this.setTradLogos()},updateQuoteTime:function(V,R,S){var U,T,Q;Q=D.marketTab.current=="all";if(V=="jj"){D.fund.updateFundTime(S);return}T=this.getMarketTime(V,R,S);if(T){if(!R&&V==="hk"&&D.group.current==="0"){v("quotes-time-hk-delay",T)}else{if(Q){v("quotes-time-"+V,T)}else{v("quotes-time-top",T)}}}else{throw new Error("no data for: "+U)}},getMarketTime:function(U,Q,R){var S,T=D.quotes.defaultQuotes[U+(Q?"real":"")];if(R!="of"&&R!="lof"){S=T&&s["v_"+T];S=S&&S.split("~")[30]+""}else{S="0"}if(S){S=this.getQuoteTime(S,U,R)}else{}return S},init:function(){var Q=this;y.subscribe({name:"stdtime-update",judge:function(R){if(R%300===0||(Q.needUpdateStdTime)){return 3}return 0},qtName:"stdunixtime",interval:6,onOk:Q.cronFns.updateStdTime});y.subscribe({name:"market-status",judge:60,qtName:"marketStat",interval:60,onOk:Q.cronFns.updateMarketStat});y.subscribe({name:"timebar-update",judge:1,interval:1,onOk:Q.cronFns.updateTimebar})}},quotes:{quoteNameMarketMap:{sh:"cn",sz:"cn",hk:"hk",us:"us",jj:"jj"},defaultQuotes:{cn:"sh000001",hkreal:"r_hkHSI",hk:"hkHSI",us:"usIXIC",jj:"sh000001"}},news:{base:"http://news.gtimg.cn/?",base2:"http://news.gtimg.cn/notice.php?",base3:"http://stock.finance.qq.com/cgi-bin/pstock/show_gonggao?v=1&",baseNewsMore:"http://finance.qq.com/stock/sother/news.htm?q=",cronIds:{cn:null,hk:null,us:null,jj:null},waitId:{cn:null,hk:null,us:null,jj:null},loadingCount:0,loaded:{},info:[["\u6e2f\u80a1","http://finance.qq.com/l/hk/list.htm ","http://finance.qq.com/stock/sother/notice.htm?q="],["\u7f8e\u80a1","http://finance.qq.com/l/usstock/news.htm","http://finance.qq.com/stock/pnews.htm"],["\u57fa\u91d1","http://finance.qq.com/l/fund/jjzxdt/index.htm","http://finance.qq.com/stock/pnews.htm?type=2"],["\u6caa\u6df1","http://finance.qq.com/l/stock/index.htm ","http://finance.qq.com/stock/sother/notice.htm?q="]],load:function(V){var Q=false;if(k.opener=="web2"&&G.ie==7){Q=true}var ag,ai,T=this,aa,S=D.marketTab.current,ab=this.loaded,ae=D.list,ah,ac,Y,U,W=this.waitId,Z,af,X,ad,R;if(ab[V]){return}else{ab[V]=true;this.loadingCount++}if(W[V]){s.clearTimeout(W[V]);W[V]=null}if(S!="all"){m.e(m.w("cn hk us jj"),function(aj){if(aj!=V){L("news-"+aj)}})}else{if(S!="jj"){L("news-jj")}}ai=r.f("box3-news-ctn");L("empty-news");ag=D.list.orders[V].base;aa=10;ag=ag.slice(0,30);if(ag.length==0){S!="all"&&J("empty-news");return}Z="finance_news_"+V;af="finance_notice_"+V;ad=function(){d.load(T.base+"name="+Z+"&n="+aa+"&q="+ag.join(",")+(Q?"&_r="+Math.random():""),function(){var am,ak,al,aj;T.loadingCount=T.loadingCount>=3?2:(T.loadingCount<1?0:T.loadingCount-1);if(s[Z]){al=s[Z];s[Z]=null;r.remClass(r.f("box3"),"hide");am=T.getLists(al,V);ak=r.$("#news-"+V+" .newslist");if(ak[0]){ak[0].innerHTML="";ak[1].innerHTML="";m.e(am,function(an){if(an[1].length>0){if(V=="us"&&an[1].length>5){r.addEl(an[1].slice(0,5),ak[0]);r.addEl(an[1].slice(5),ak[1])}else{r.addEl(an[1],ak[0])}aj=r.f("#news-"+an[0]+" .newstit a");aj.href=T.baseNewsMore+ag.join(",");J("news-"+an[0]);L("empty-news")}else{if(S=="us"){L("news-us");r.addClass(r.f("box3-news-ctn"),"hide")}}},true)}J(ai)}},{charset:"gbk"});if(V!="us"){X=r.$("#news-"+V+" .newstit")[1];X.style.visibility="hidden";if(V==="jj"){af="finance_notice";R=T.base3}else{R=T.base2}s.setTimeout(function(){d.load(R+"name="+af+"&n="+aa+"&q="+ag.join(",")+(Q?"&_r="+Math.random():""),function(){var am,ak,al,aj;if(s[af]){al=s[af];s[af]=null;r.remClass(r.f("box3"),"hide");am=T.getLists(al,V,true);ak=r.$("#news-"+V+" .newslist")[1];if(ak){ak.innerHTML="";m.e(am,function(an){if(an[1].length>0){X.style.visibility="visible";r.addEl(an[1],ak);if(V=="cn"||V=="hk"){aj=r.$("#news-"+an[0]+" .newstit a")[1];aj.href=T.info[0][2]+ag.join(",")}}},true)}J(ai)}},{charset:"gbk"})},60)}};W[V]=s.setTimeout(ad,90*this.loadingCount)},getNPTitle:function(T,V,S){var R,X,aa,U,W,Q,Z,Y=8,ab=4;if(T.length<20){R=T[0];X=0;aa=T[1]}else{R=T[2];X=T[0];aa=T[1]}U=aa;aa=aa.replace(m.getReg("[\\s\u3000]*","ig"),"");if(aa.length>ab){for(W=0;W<Y;W++){if(aa.charCodeAt(W)>255&&Y>ab){Y--}}U=aa.substring(0,Y)}if(!S&&(X=="1"||X=="51")){Q="http://stockhtm.finance.qq.com/sstock/quotpage/q/"+R+".htm#"+(V?"2":"news");Z=V?"cnpt":"cnnt"}else{if(X=="100"){Q="http://stockhtm.finance.qq.com/hk/quotpage/q/"+R+".htm#"+(V?"notice":"news");Z=V?"hkpt":"hknt"}else{Q=i._getUrlByType(R,X);Z=X=="200"?"usnt":(V?"jjpt":"jjnt")}}return'<a href="'+Q+'" title="'+aa+"("+R+')" target="_blank" class="'+M.clickPre+"denter d-"+Z+'">'+U+"</a>"},getLists:function(T,W,Z){var af={},U,S,ae,Y,Q=D.quotes.quoteNameMarketMap,aa=D.fund.mapSb2Qt,T,V=D.timeBar,ab=this,ac,ad,X,R=W==="jj";af[W]=[W,[]];U=af[W][1];m.e(T,function(ah){var ag;S=Z?(R?ah[3].split(",")[0]:ah[7].split(",")[0]):ah[4].split(",")[0];if(!Z){T=V.baseTime-D.timeBar.getUnixTimeFromStr(ah[0]);T=T<60?60:T;ah[0]=ab.getDiffTimeStr(T*1000);ac=55;ag=ah[2]}else{ag=R?ah[1]:ah[4];ac=51;if(W=="cn"){ad=ag.indexOf("\uff1a");if(ad<=6){ag=ag.substr(ad+1)}}}if(W!="jj"){Y=s["v_"+S]||s["v_r_"+S]}else{S=aa[S];Y=s["v_"+S]}if(Y){Y=ab.getNPTitle(Y.split("~"),Z,R)}if(!Y){Y=S&&S.substr(2)}U.length<10&&U.push({child:[{tag:"span",text:Z?ah[0].split(" ")[0]:ah[0]},{tag:"_text",text:" ["},{tag:"span",css:"float:none;font-size:12px;",html:Y},{tag:"_text",text:"] "},{tag:"a",title:ag,text:E(ag,ac),href:(Z?(R?"http://stock.finance.qq.com"+ah[2]:ah[5]):ah[3]),target:"_blank",cls:M.clickPre+"denter d-"+W+(Z?"p":"n")}]})});return af},getDiffTimeStr:function(Q){var R="";if(Q<60000){Q=Math.floor(Q/1000);R="\u79d2"}else{if(Q<3600000){Q=Math.floor(Q/60000);R="\u5206\u949f"}else{if(Q<86400000){Q=Math.floor(Q/3600000);R="\u5c0f\u65f6"}else{if(Q<2592000000){Q=Math.floor(Q/86400000);R="\u5929"}else{Q=Math.floor(Q/2592000000);R="\u4e2a\u6708"}}}}return[Q,R,"\u524d"].join("")},init:function(){var R=r.f("news-cn"),Q,S,T=this.info;S=r.$(".newstit",Q);S[0].innerHTML='<a href="'+T[3][1]+'" class="'+M.clickPre+'denter d-cnnm" target="_blank">\u66f4\u591a&gt;&gt;</a>\u81ea\u9009'+T[3][0]+"\u65b0\u95fb";S[1].innerHTML='<a href="'+T[3][2]+'" class="'+M.clickPre+'denter d-cnpm" target="_blank">\u66f4\u591a&gt;&gt;</a>\u81ea\u9009'+T[3][0]+"\u516c\u544a";m.e(m.w("hk us jj"),function(V,U){Q=R.cloneNode(true);Q.id="news-"+V;Q.className="undis";S=r.$(".newstit",Q);if(V=="us"){S[1].innerHTML='<a href="'+T[U][1]+'" class="'+M.clickPre+'denter d-usnm" target="_blank">\u66f4\u591a&gt;&gt;</a>';S[0].innerHTML="\u81ea\u9009"+T[U][0]+"\u65b0\u95fb";S=r.$(".newslist",Q);S[0].parentNode.height="140";S[1].parentNode.height="140";Q.style.height="170px";S=r.$("table",Q);S[0].style.height="170px";S[1].style.height="170px"}else{S[0].innerHTML='<a href="'+T[U][1]+'" class="'+M.clickPre+"denter d-"+V+'nm" target="_blank">\u66f4\u591a&gt;&gt;</a>\u81ea\u9009'+T[U][0]+"\u65b0\u95fb";S[1].innerHTML='<a href="'+T[U][2]+'" class="'+M.clickPre+"denter d-"+V+'pm" target="_blank">\u66f4\u591a&gt;&gt;</a>\u81ea\u9009'+T[U][0]+"\u516c\u544a"}R.parentNode.appendChild(Q)});r.addClass(r.f("box3"),"hide")}},events:{clkhandlers:{grouptab:function(S,Q){var R=Q.id.match(m.getReg("([0-9]+)$"));if(R&&R[1]){D.list.switchTo(null,R[1],null);H.go(44)}},markettab:function(S,Q){var R=Q.id.match(m.getReg("-([a-z]+)$"));if(R&&R[1]){R=R[1];D.list.switchTo(R,null,null);switch(R){case"cn":H.go(5);break;case"hk":H.go(6);break;case"us":H.go(7);break;case"jj":H.go(8);break}}},listtype:function(S,Q){var R=Q.id.match(m.getReg("-([0-9]+)$"));if(R&&R[1]){D.list.switchTo(null,null,R[1]);if(R[1]=="1"){H.go(9)}}},hidenttop:function(R,Q){D.list.updateRealHk()},hidenthk:function(R,Q){D.list.updateRealHk()},updatetop:function(R,Q){D.list.updateRealHk();H.go(39)},updatehk:function(R,Q){D.list.updateRealHk();H.go(39)},groupdrop:function(T,Q){var S=r.f("div",Q.parentNode),R=x.hide;if(r.hasClass(S,R)){r.remClass(S,R);D.group.dropingMenu=S}else{D.group.dropingMenu=null;r.addClass(S,R)}},groupnew:function(R,Q){D.notice.dialogs.groupnew()},grouprename:function(R,Q){D.notice.dialogs.grouprename(Q.parentNode.parentNode.id)},groupremove:function(R,Q){D.notice.dialogs.groupremove(Q.parentNode.parentNode.id)},dlgno:function(T,Q){var R=Q.parentNode.parentNode.parentNode.parentNode.parentNode.id.split("~")[1],S=D.notice.clsDialog._instances[R];if(S){S.close()}},dlgcancel:function(T,Q){var R=Q.parentNode.parentNode.parentNode.parentNode.parentNode.id.split("~")[1],S=D.notice.clsDialog._instances[R];if(S){S.close()}},dlgok:function(T,Q){var R=Q.parentNode.parentNode.parentNode.parentNode.parentNode.id.split("~")[1],S=D.notice.clsDialog._instances[R];if(S){S.ok()}},sort:function(R,Q){D.list.sort(Q);H.go(1)},stockremove:function(R,Q){D.notice.dialogs.stockremove(Q.parentNode.parentNode.id)},fav:function(R,Q){A(Q,"http://stockapp.finance.qq.com/pstock","\u817e\u8baf\u8d22\u7ecf-\u81ea\u9009\u80a1")},sethome:function(){O("http://stockapp.finance.qq.com/pstock")},noteedit:function(R,Q){var S;Q=Q.parentNode.parentNode;S=Q.id;S=S&&S.split("~");if(S&&S[1]){D.notice.dialogs.noteedit(S[1]);H.go(38)}},bledit:function(R,Q){var S;Q=Q.parentNode.parentNode;S=Q.id;if(S){S=S.split("~");if(S&&S[1]){D.balance.loadBlAndPop(S[1],m.endWith(Q.parentNode.parentNode.id,"real"))}}},aledit:function(R,Q){var S;Q=Q.parentNode.parentNode;S=Q.id;if(S){S=S.split("~");if(S&&S[1]){D.balance.loadAlAndPop(S[1])}}},addbl:function(R,Q){Q=Q.parentNode.parentNode.parentNode.parentNode.previousSibling;D.balance.addBlRow(Q)},delbl:function(R,Q){Q=Q.parentNode.parentNode;D.balance.delBlRow(Q)},notetext:function(R,Q){if(Q.value===M.noteHint){Q.value=""}},alcancel:function(S,Q){var R=r.$("#"+M.alIptCtn+" input");m.e(m.w("0 2 4 6 7 8"),function(T){R[T]&&(R[T].checked=false)})},denter:function(T,Q){var R=Q.className.split(" "),S="\u8d44\u8baf";switch(R[1].substr(2)){case"nc":H.go(4);S="\u884c\u60c5";break;case"cnn":H.go(12);break;case"cnnm":H.go(13);break;case"cnnt":H.go(14);break;case"cnp":H.go(15);break;case"cnpm":H.go(16);break;case"cnpt":H.go(17);break;case"hkn":H.go(18);break;case"hknm":H.go(19);break;case"hknt":H.go(20);break;case"hkp":H.go(21);break;case"hkpm":H.go(22);break;case"hkpt":H.go(23);break;case"usn":H.go(24);break;case"usnm":H.go(25);break;case"usnt":H.go(26);break;case"jjn":H.go(27);break;case"jjnm":H.go(28);break;case"jjnt":H.go(29);break;case"jjp":H.go(30);break;case"jjpm":H.go(31);break;case"jjpt":H.go(32);break}if(k.opener=="web2"){if(s.parent.qqweb){s.parent.qqweb.portal.openInWebBrowser({url:Q.href,title:"\u4e2a\u80a1"+S});return false}}return true},fold:function(T,Q){var S="parentNode",R;R=Q.parentNode;S=Q[S][S][S][S][S].id;if(S){D.list.fold(S.substr(0,2),R.className!="closed");D.list.saveFold();H.go(45)}},updatecn:function(){D.list.updateByClk("cn")},updateus:function(){D.list.updateByClk("us")},updatetops:function(){D.list.updateByClk(D.marketTab.current)},updateof:function(){D.list.updateByClk("of")},updatecf:function(){D.list.updateByClk("cf")},updateetf:function(){D.list.updateByClk("etf")},updatelof:function(){D.list.updateByClk("lof")}},mohandlers:{note:function(S,Q){var T=Q.parentNode.parentNode.id,R=D.list.data;T=T&&T.split("~");if(T&&T[1]){R=R[T[1]];if(R&&R[3]!==""){D.notice.bubble(S,D.list.note2Html(R[3]))}}},trigger:function(S,R){var Q=R.id.match(m.getReg("trad-([a-z]+)(-[a-z]+)?-trigger"));if(Q&&Q[1]){if(Q[2]){r.f("trad-"+Q[1]+Q[2]).style.display="block"}else{r.f("trad-"+Q[1]).style.display="block"}}},grpbtn:function(R,Q){r.addClass(Q,x.drOver)},hint:function(R,Q){J(Q.nextSibling)}},mouthandlers:{note:function(R,Q){var S=D.notice;if(S.bubbleShow){S.bubble(false)}},trigger:function(S,R){var Q=R.id.match(m.getReg("trad-([a-z]+)(-[a-z]+)?-trigger"));if(Q&&Q[1]){if(Q[2]){r.f("trad-"+Q[1]+Q[2]).style.display="none"}else{r.f("trad-"+Q[1]).style.display="none"}}},grpbtn:function(R,Q){r.remClass(Q,x.drOver)},hint:function(S,R){var Q=S.relatedTarget||S.toElement;if(Q!==R.nextSibling){L(R.nextSibling)}},hinttar:function(S,R){var Q=S.relatedTarget||S.toElement;if(Q!==R.previousSibling&&!r.contains(Q,R)){L(R)}}},kuhandlers:{rfcost:function(S,Q){var R=Q.value;R=R===""?"1":R;D.balance.isBlDataLegal([["buy","2000-1-1",R/100,R,"0"]],true)},rfamout:function(S,Q){var R=Q.value;R=R===""?"1":R;D.balance.isBlDataLegal([["buy","2000-1-1",R,"1.0","0"]],true,true)},rfprice:function(R,Q){},rftax:function(R,Q){},blamout:function(S,Q){var R=Q.value;R=R===""?"1":R;D.balance.isBlDataLegal([["buy","2000-1-1",R,"1.0","0"]])},blprice:function(S,Q){var R=Q.value;R=R===""?"1":R;D.balance.isBlDataLegal([["buy","2000-1-1","1",R,"0"]])},bltax:function(S,Q){var R=Q.value;R=R===""?"1":R;D.balance.isBlDataLegal([["buy","2000-1-1","1","1",R]])},ala:function(R,Q){D.balance.syncAlData(1)},alb:function(R,Q){D.balance.syncAlData(3)},ald:function(R,Q){D.balance.syncAlData(5)}},beginDragItem:function(ak,R){var T,an,V,W,X,al,aa,ah="du-sd-ddproxy",S=false,Q,ao,Z,ag,ab,am,aj,ad=false,Y=false,ae,U,ai,af,ac=true;aj=D.list;ai=R.parentNode.parentNode.id;if(ai=="ul-hk-real"){ag=true;Z="hk";ae=false}else{if(ai=="ul-bl-hk-real"){ag=true;Z="hk";ae=true}else{ae=ai.match(m.getReg("ul(-bl+)?(-[a-z]+)?-([a-z]+)?")),Z=ae[3];U=ae[2]?ae[2].substr(1):false;ae=!!ae[1];if(Z=="hk"&&D.group.current=="0"){ac=false}}}if(Z=="jj"){if(aj.sortActiveBtn.jj[U]!==null){l("cancel d&d for a sorted list");return}}else{if(aj.sortActiveBtn[Z]!==null){l("cancel d&d for a sorted list");return}}r.remEl(r.$("tr."+x.hide,R.parentNode));an=r.getWindowXY();W=(an[0]-960)/2;W=W<0?0:W;X=ac?-29:0;al=R;while(al.id!="box2"){X+=al.offsetTop;al=al.parentNode}Q=R.firstChild.innerHTML;ao=R.childNodes[1].firstChild.innerHTML;T=r.f(ah);if(!T){T=r.addEl({id:ah,css:"width:958px;height:23px;border:1px dashed #f00;opacity:.8;filter:alpha(opacity=80);position:absolute;visibility:hidden;color:#0C3B8D;line-height:23px;font-family:Tahoma;"},I.body)}T.style.left=W+"px";T.style.top=X+"px";T.innerHTML='<span style="padding-left:15px;">'+Q+'</span><span style="padding-left:18px;">'+ao+"</span>";aa=X;ab=R.offsetTop-R.parentNode.firstChild.offsetTop;am=R.parentNode.lastChild.offsetTop-R.offsetTop;if(Z==="hk"&&D.group.current==="0"){al=aj.orders.hk.base.length-P.hkRealCount;if(al>0){if(ag){am+=27+al*25}else{ab+=27+P.hkRealCount*25}}}T.moved=false;d.Drag.handler(ak,T,false,{t:ab,b:am,l:0,r:0},function(aq,ar,ap){T.style.visibility="hidden";T.style.top="0";if(G.ie){r.remClass(R,x.ieHide)}R.style.visibility="visible";y.resume();D.timeBar.needUpdateStdTime=true;if(Y){aj.syncList2Order(Z,ae,R.id.substr(9),ad,U);aj.lazyOrderSave(Z,U,ad)}},function(aq,ar,ap){var av,au,at;if(!S){if(Math.abs(ar-X)>4){S=true;y.pause();if(G.ie){r.addClass(R,x.ieHide+" "+x.hide);J(R)}R.style.visibility="hidden";T.style.visibility="visible"}}else{at=ar-aa;if(at>13&&R.nextSibling){r.insertAfter(R,R.nextSibling);aa+=25;Y=true}else{if(at<-13&&R.previousSibling){r.insertBefore(R,R.previousSibling);aa-=25;Y=true}else{if(at>40){av=ae?r.f("#ul-bl-hk tbody tr"):r.f("#ul-hk tbody tr");au=R.previousSibling;r.insertAfter(R,av);r.insertAfter(av,au);aa+=52;Y=true;ad=!ad}else{if(at<-40){av=(ae?r.f("#ul-bl-hk-real tbody"):r.f("#ul-hk-real tbody")).lastChild;au=R.nextSibling;if(au){r.insertAfter(R,av);r.insertBefore(av,au)}else{au=av.previousSibling;r.insertAfter(av,R);r.insertAfter(R,au)}aa-=52;Y=true;ad=!ad}}}}}})},click:function(T){var Q,S=0,U,R;T=T||s.event;R=this.clkhandlers;Q=D.group.dropingMenu;if(Q){r.addClass(Q,x.hide);D.group.dropingMenu=null}Q=T.target||T.srcElement;while(Q&&Q!==I&&S++<3){U=Q.className.match(m.getReg(M.clickPre+"([a-z]+)"));if(U&&U[1]){break}Q=Q.parentNode}if(U&&U[1]){if(R[U[1]]){R[U[1]](T,Q)!==true&&q.stopEvent(T)}}},md:function(T){T=T||s.event;var Q=T.target||T.srcElement,S=0,R=x.item;if(Q.tagName==="A"){return}if(Q.className==="lf "+x.dlgTitle){q.stopEvent(T);Q=Q.parentNode.parentNode.parentNode.parentNode.parentNode;d.Drag.handler(T,Q,false,false,function(U,Z){var V=Q.clientWidth,X=Q.clientHeight,W=r.getWindowXY(),Y=r.getScrollXY();if(U<-V/2){U=-V/2}if(U>Y[0]+W[0]-V/2){U=Y[0]+W[0]-V/2}if(Z<-X/2){Z=-X/2}if(Z>Y[1]+W[1]-X/2){Z=Y[1]+W[1]-X/2}Q.style.left=U+"px";Q.style.top=Z+"px"});return}while(S++<3&&Q&&Q.id!="box2"){if(Q.className&&Q.className.split(" ")[0]==R){this.beginDragItem(T,Q);break}Q=Q.parentNode}},mo:function(S){S=S||s.event;var Q=S.target||S.srcElement,T,R;T=Q.className.match(m.getReg(M.moPre+"([a-z]+)"));if(T&&T[1]){R=this.mohandlers;if(R[T[1]]){R[T[1]](S,Q);q.stopEvent(S)}}},mout:function(S){S=S||s.event;var Q=S.target||S.srcElement,T,R;T=Q.className.match(m.getReg(M.moPre+"([a-z]+)"));if(T&&T[1]){R=this.mouthandlers;if(R[T[1]]){R[T[1]](S,Q);q.stopEvent(S)}}},listRowMo:function(S){S=S||s.event;var Q=S.target||S.srcElement,R=x.item;if(!D.list.activeEntry){while(Q&&Q.id!="box2"){tn=Q&&Q.tagName;if(tn=="TR"){if(r.hasClass(Q,R)){z(Q)}}Q=Q.parentNode}}},listRowMout:function(Q){u()},keyup:function(S){S=S||s.event;var Q=S.target||S.srcElement,T,R;T=Q.className.match(m.getReg(M.keyUpPre+"([a-z]+)"));if(T&&T[1]){R=this.kuhandlers;if(R[T[1]]){R[T[1]](S,Q);q.stopEvent(S)}}},unload:function(Q){if(!confirm(111)){return false}},attachFocus:function(){if(G.ie){m.e(r.$("#marksel a, #quotes a"),function(Q){Q.onfocus=function(){this.blur()}})}},rateChange:function(){var S=r.f("#ul-bl-cn tfoot select"),Q=D.balance,R=Q.cnBalance;Q._updateBlSum("cn",R[0],R[1],R[2],R[3],R[4],R[5])},winFocus:function(){var Q=y.count-D.list.cronStartCount.hkreal;if(Q>P.hkDelayMaxSec){D.list.updateRealHk()}}},smartbox:{box:null,ctn:"smartbox-ctn",choosedCode:"",move:function(Q){var S=Q?"empty":"top",R=Q?"top":"empty";S=r.f("add-form-"+S+"-ctn");R=r.f("add-form-"+R+"-ctn");if(S&&S.innerHTML==""){S.appendChild(r.f(this.ctn));R.innerHTML=""}},init:function(){var Q=this;d.load("fn-smartbox",function(){var R=Q.ctn,S=__.Dom.f(R),T;T=new __.widget.SmartBox(R,{attach:{form:S,type:S.qc_type,query:S.cl,submit:S.submitbtn},defaultType:D.marketTab.marketSbMap[k.activeMarket],listYOffset:1,zindex:4,adjustLimit:Infinity,onclick:function(W){var V=W[1],U=V.indexOf(".");if(W[2]=="300"||W[2]=="350"){D.notice.lightErr("\u5f88\u62b1\u6b49\uff0c\u6682\u4e0d\u652f\u6301\u6dfb\u52a0\u671f\u8d27");return}if(U>0){V=V.substr(0,U)}T.queryIpt.value=V;Q.choosedCode=i.MAP_STOCKTYPE[W[2]]+W[1];D.list.addFromSb(Q.choosedCode,W[4]);T.queryIpt.focus()},onsubmit:function(V,U,W){q.stopEvent(W);T.b4Show=false;T.show()}});Q.box=T;D.pricebox.init()})}},pricebox:{init:function(){var Q=function(){new __.widget.PriceBox("pricebox-container",{zindex:1000,cronObj:y,addStock:function(S,R){D.list.addFromPb(S,R)}});D.init._pbLoaded=1;D.init.finish()};if(!d.isSet("__.widget.PriceBox")){d.load("fn-pricebox",function(){Q()})}else{Q()}}},topScroll:{names:"sh000001,sz399001,r_hkHSI,usDJI,usIXIC,gzFCHI,gzGDAXI,gzN225,gzFTSTI,gzTWII,fqUS_GC_1,fqUS_CL_1",init:function(){var Q=new f("word","arr_up","arr_do",false,2500,false),S=this.names,R=true;y.subscribe({name:"topscroll",judge:function(W){var V,T=0,U;if(W===0){T=3}else{U=S.split(",");V=Math.round(Q.ScrollContent.scrollTop/Q.LineHeight);R=V;U=U.slice(V*3,V*3+3);this.qtName=U.join(",");T=3}return T},interval:P.loadingCycle,qtName:S,onOk:function(V){var T=r.f("word"),U=r.$("#word p > span");m.e(S.split(","),function(Y,X){var W=s["v_"+Y];W=W&&W.split("~");if(W&&(R===true||Math.floor(X/3)===R)){if(X<5){U[X*3].innerHTML=i.process("L_PRICE",W);U[X*3+1].innerHTML=i.process("L_PERCENT",W)}else{if(X<10){U[X*3].innerHTML=i.process("S_PRICE",W);U[X*3+1].innerHTML=i.process("S_PERCENT",W)}else{U[X*3].innerHTML=i.process(function(Z){return j.GET_COLOR(Z[5],Z[6])},W);U[X*3+1].innerHTML=i.process(function(Z){var aa=Z[6]*100/(Z[5]-Z[6]);return j.GET_COLOR(aa.toFixed(2)+"%",Z[6])},W)}}if(X<3){U[X*3+2].innerHTML=(W["37"]/10000).toFixed(2)+(X==2?"\u4ebf\u6e2f\u5143":"\u4ebf\u5143");U[X*3+2].className="fc10 sepr"}}});Q.Refresh();l("top scroll updated")}})}},login:{intervId:null,logined:false,getUrl:function(){var S=Math.random(),T,R,Q;R=s.location.pathname;if(R.indexOf("msgbox.php")>0){T="_r="+S;Q="msgbox"}else{T=s.location.search==""?"":"stktype="+k.activeMarket+"&grpid="+k.activeGroup;T+=(T===""?"":"&")+(k.action&&k.sbId?"actions="+k.action+","+k.sbId:"")+"&_r="+S;Q="pstock"}return"http://ui.ptlogin2.qq.com/cgi-bin/login?qlogin_auto_login=1&qlogin_jumpname="+Q+"&f_url=loginerroralert&low_login=1&appid=5000801&qlogin_param="+s.encodeURIComponent(T)+"&_r="+S+"&s_url=http%3A%2F%2Fstockapp.finance.qq.com"+s.encodeURIComponent(R+"?"+T)},isLogin:function(){return this.logined},showLogin:function(){var Q=this;if(r.f("login_div")){return}D.notice.clsDialog.addIvDiv(true);r.addEl({css:"position:absolute;z-index:1000;top:0;left:0;width:100%;height:100%;",child:{id:"login_div",css:"padding:0;margin:auto;width:372px;height:233px;position:absolute;top:0;left:0;",html:'<iframe src="'+this.getUrl()+'" id="login_frame" frameBorder="0" scrolling="noscroll" width="100%" height="100%"></iframe>'}},I.body);this.centerWindow();this.intervId=s.setInterval(function(){Q.centerWindow()},500)},centerWindow:function(){var Q=r.f("login_div");Q&&r.setCenter(Q)},setupPtLogin:function(){var Q=this;s.ptlogin2_onResize=function(T,R){var S;if(!T||T<300){T=371;R=276}S=__.Dom.f("login_div");if(S){S=S.style;S.width=T+"px";S.height=R+"px";S.visibility="hidden";S.visibility="visible"}};s.ptlogin2_onClose=function(){s.clearInterval(Q.intervId);r.remEl(r.f("login_div").parentNode);D.notice.clsDialog.remIvDiv()}},init:function(U){var S,R,Q=true,T=this;this.setupPtLogin();R=r.f("#userinfo td a");if(k.isLogin){this.logined=true;if(!U){R.innerHTML="\u9000\u51fa";R.href="http://stockapp.finance.qq.com/pstock/view/logout.php?"+Math.random();S=r.f("#userinfo td .ico1");if(d.cfg[1]){S.innerHTML='<span style="padding-right:50px;">V'+c+"</span> \u6b22\u8fce\u60a8\uff0c"+k.nickName}else{S.innerHTML="";r.addText(S,"\u6b22\u8fce\u60a8\uff0c"+k.nickName)}}}else{if(!U){R.innerHTML="\u767b\u5f55";R.onclick=function(){T.showLogin()}}this.showLogin();Q=false}return U?false:Q}},calendar:{idCount:0,loaded:false,fileUrl:"http://mat1.gtimg.com/finance/st/p/stock-diy/calendar_1.0.js",load:function(R){var Q=this;d.load(this.fileUrl,function(){Q.loaded=true;R&&R()})},attach:function(Q){var S=r.$("span.cal",Q),T=d.widget.sdCalendar,R;m.e(S,function(U){R=U.id.match(m.getReg("[a-z]+-([0-9]+)"));if(R&&R[1]){T.setup({animation:false,trigger:M.calTriPre+R[1],inputField:M.calIptPre+R[1],onSelect:function(){this.hide()}})}})},init:function(){var Q=this;y.subscribe({name:"calendar-init",judge:function(R){if(R===4){return 3}return 0},interval:4,runOnce:true,onOk:function(R){if(!Q.loaded){Q.load()}}})}},plugins:{base:"http://mat1.gtimg.com/finance/st/p/stock-diy/",loadMsgbox:function(R){var Q="1.4b";if(!D.msgBox){d.load(this.base+"sd-msgbox_"+Q+".js",function(){R&&R();D.init._mbLoaded=1;D.init.finish()})}},loadSmPic:function(R){var Q="1.3a";if(!D.smallPicture){d.load(this.base+"sd-spicture_"+Q+".js",function(){D.smallPicture.init({boss:H});D.init._spLoaded=1;D.init.finish()})}},init:function(){this.loadSmPic();this.loadMsgbox(function(){D.msgBox.initAsPlugin({uin:k.QQ,cron:y})})}},actions:{list:{ad:function(Q){i.load(Q,function(){Q=s["v_"+Q];Q=Q&&Q.split("~");if(Q&&Q[1]){D.list.add(k.sbId,Q[1],k.activeMarket,k.activeGroup)}})},al:function(Q){D.balance.loadAlAndPop(Q)},bl:function(R){var Q=false;if(k.activeGroup==="0"){if(m.startWith(R,"hk")){if(m.inArray(R,D.list.orders.hk.base.slice(0,10),true)){Q=true}}}D.balance.loadBlAndPop(R,Q)},nt:function(Q){D.notice.dialogs.noteedit(Q)},rm:function(Q){i.load(Q,function(){Q=s["v_"+Q];Q=Q&&Q.split("~");if(Q&&Q[1]){D.list.remove(k.sbId,Q[1])}})}},init:function(){var U=k.action,S=this.list,R=k.sbId,Q,T=function(V){return V in D.list.data};if((U in S)&&R){Q=K(R);if(U=="ad"||T(Q)){S[U](Q)}}k.action=false}},cron:y,init:(function(){var S;function R(){var W=D.events,V=I.body;q.on(V,"click",q.bind(W.click,W));q.on(V,"mousedown",q.bind(W.md,W));q.on(V,"mouseover",q.bind(W.mo,W));q.on(V,"mouseout",q.bind(W.mout,W));q.on(V,"keyup",q.bind(W.keyup,W));q.on("#ul-bl-cn tfoot select","change",W.rateChange);q.on(s,"focus",W.winFocus);q.on(r.f("box2"),"mouseover",q.bind(W.listRowMo,W));q.on(r.f("box2"),"mouseout",q.bind(W.listRowMout,W));W.attachFocus()}function T(){var aa,Y,Z,X,V,W;Z=["action","sbId","activeMarket","activeGroup","activeType"];aa=["isLogin","QQ","nickName","groups",Z[2],Z[3],Z[4],Z[0],Z[1],"list","cfg","opener"];k={};Y=d.cfg[0].sd;m.e(aa,function(ac,ab){k[ac]=Y[ab]});k.binFold=k.cfg.split("~")[2];Y=location.search.split(/&(?!amp;)/);m.e(Y,function(ac){var ab;if(m.startWith(ac,"?")){ac=ac.substr(1)}ac=ac.split("=");if(ac[0]==="actions"){ac=ac[1].split(",");if(ac.length===2){ab=m.getReg("^[a-z0-9A-Z.]*$");if(ac[0].match(ab)&&ac[1].match(ab)){k.action=ac[0];k.sbId=ac[1]}}}});Y=s.location.hash;if(Y.length){Y=Y.substr(1)}if(Y.length>5){m.e(Y.split(","),function(ac,ab){if((ab in Z)&&ac.match(m.getReg("^[a-z0-9A-Z.]*$"))){k[Z[ab]]=ac}})}}function U(){s.setTimeout(function(){D.calendar.init();D.smartbox.init();D.plugins.init()},100)}function Q(W){if(W||(S._pbLoaded&&S._mbLoaded&&S._spLoaded)){var V;V=s.QosSS;V.t[2]=(new Date()).getTime();H.go(49);H.go(50);__.load("http://pingjs.qq.com/ping.js",function(){if(typeof(pgvMain)=="function"){pvSetupHot=1;vsPgvCol="pgv_caijing_pstk";if(k.opener=="web2"){pvRefDomain="web2.qq.com"}pgvMain()}});if(Math.random()<0.4){V.c=new Image();V.c.onload=(V.c.onerror=function(){delete V.c});V.c.src=" http://qos.report.qq.com/collect?type=1&name=stock_web_pstock&1="+(V.t[1]-V.t[0])+"&2="+(V.t[2]-V.t[0])+"&3=0&4=0&5=0"}}}S=function(X){var V,W;d.topLayer=20;I.domain="qq.com";V=s.location;if(V.hash&&V.hash.substr(0,2)=="#."){V.hash="#"+V.hash.substr(2);if(G.ie){return}}T();H=new B(k.QQ);if(D.login.init(X)){D.notice.loading(true);m.e(m.w("topScroll news list timeBar"),function(Y){D[Y].init()});R();y.start();U()}else{QosSS.t[1]=(new Date()).getTime();Q(true)}};S.finish=Q;return S}())}}());D=d.app[e]})}(this));/*  |xGv00|5a8e7a5563c0ee7a973c84e7c8fa6081 */